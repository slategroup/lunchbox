/*
 * Looking for the full, uncompressed source? Try here:
 *
 * https://github.com/nprapps/lunchbox
 *
 * The following files are included in this compressed version:
 *
 * www/js/lib/bootstrap.js
 * www/js/lib/html2canvas.js
 * www/js/lib/medium-editor.min.js
 * www/js/lib/moment.js
 * www/js/factlist.js
 */
if(typeof jQuery==="undefined")throw new Error("Bootstrap requires jQuery");+function($){"use strict";function transitionEnd(){var el=document.createElement('bootstrap');var transEndEventNames={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd otransitionend','transition':'transitionend'};for(var name in transEndEventNames)if(el.style[name]!==undefined)return{end:transEndEventNames[name]};}$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this;$(this).one($.support.transition.end,function(){called=true;});var callback=function(){if(!called)$($el).trigger($.support.transition.end);};setTimeout(callback,duration);return this;};$(function(){$.support.transition=transitionEnd();});}(jQuery);+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on('click',dismiss,this.close);};Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr('data-target');if(!selector){selector=$this.attr('href');selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'');}var $parent=$(selector);if(e)e.preventDefault();if(!$parent.length)$parent=$this.hasClass('alert')?$this:$this.parent();$parent.trigger(e=$.Event('close.bs.alert'));if(e.isDefaultPrevented())return;$parent.removeClass('in');function removeElement(){$parent.trigger('closed.bs.alert').remove();}$.support.transition&&$parent.hasClass('fade')?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement();};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.alert');if(!data)$this.data('bs.alert',(data=new Alert(this)));if(typeof option=='string')data[option].call($this);});};$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this;};$(document).on('click.bs.alert.data-api',dismiss,Alert.prototype.close);}(jQuery);+function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);};Button.DEFAULTS={loadingText:'loading...'};Button.prototype.setState=function(state){var d='disabled';var $el=this.$element;var val=$el.is('input')?'val':'html';var data=$el.data();state=state+'Text';if(!data.resetText)$el.data('resetText',$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=='loadingText'?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d);},0);};Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons"]');var changed=true;if($parent.length){var $input=this.$element.find('input');if($input.prop('type')==='radio')if($input.prop('checked')&&this.$element.hasClass('active'))changed=false;else $parent.find('.active').removeClass('active');if(changed)$input.prop('checked',!this.$element.hasClass('active')).trigger('change');}if(changed)this.$element.toggleClass('active');};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.button');var options=typeof option=='object'&&option;if(!data)$this.data('bs.button',(data=new Button(this,options)));if(option=='toggle')data.toggle();else if(option)data.setState(option);});};$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this;};$(document).on('click.bs.button.data-api','[data-toggle^=button]',function(e){var $btn=$(e.target);if(!$btn.hasClass('btn'))$btn=$btn.closest('.btn');$btn.button('toggle');e.preventDefault();});}(jQuery);+function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find('.carousel-indicators');this.options=options;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=='hover'&&this.$element.on('mouseenter',$.proxy(this.pause,this)).on('mouseleave',$.proxy(this.cycle,this));};Carousel.DEFAULTS={interval:5000,pause:'hover',wrap:true};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this;};Carousel.prototype.getActiveIndex=function(){this.$active=this.$element.find('.item.active');this.$items=this.$active.parent().children();return this.$items.index(this.$active);};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getActiveIndex();if(pos>(this.$items.length-1)||pos<0)return;if(this.sliding)return this.$element.one('slid.bs.carousel',function(){that.to(pos);});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?'next':'prev',$(this.$items[pos]));};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find('.next, .prev').length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(true);}this.interval=clearInterval(this.interval);return this;};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide('next');};Carousel.prototype.prev=function(){if(this.sliding)return;return this.slide('prev');};Carousel.prototype.slide=function(type,next){var $active=this.$element.find('.item.active');var $next=next||$active[type]();var isCycling=this.interval;var direction=type=='next'?'left':'right';var fallback=type=='next'?'first':'last';var that=this;if(!$next.length){if(!this.options.wrap)return;$next=this.$element.find('.item')[fallback]();}this.sliding=true;isCycling&&this.pause();var e=$.Event('slide.bs.carousel',{relatedTarget:$next[0],direction:direction});if($next.hasClass('active'))return;if(this.$indicators.length){this.$indicators.find('.active').removeClass('active');this.$element.one('slid.bs.carousel',function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass('active');});}if($.support.transition&&this.$element.hasClass('slide')){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(' ')).addClass('active');$active.removeClass(['active',direction].join(' '));that.sliding=false;setTimeout(function(){that.$element.trigger('slid.bs.carousel');},0);}).emulateTransitionEnd(600);}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass('active');$next.addClass('active');this.sliding=false;this.$element.trigger('slid.bs.carousel');}isCycling&&this.cycle();return this;};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.carousel');var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=='object'&&option);var action=typeof option=='string'?option:options.slide;if(!data)$this.data('bs.carousel',(data=new Carousel(this,options)));if(typeof option=='number')data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle();});};$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this;};$(document).on('click.bs.carousel.data-api','[data-slide], [data-slide-to]',function(e){var $this=$(this),href;var $target=$($this.attr('data-target')||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''));var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr('data-slide-to');if(slideIndex)options.interval=false;$target.carousel(options);if(slideIndex=$this.attr('data-slide-to'))$target.data('bs.carousel').to(slideIndex);e.preventDefault();});$(window).on('load',function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);$carousel.carousel($carousel.data());});});}(jQuery);+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.transitioning=null;if(this.options.parent)this.$parent=$(this.options.parent);if(this.options.toggle)this.toggle();};Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass('width');return hasWidth?'width':'height';};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass('in'))return;var startEvent=$.Event('show.bs.collapse');this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var actives=this.$parent&&this.$parent.find('> .panel > .in');if(actives&&actives.length){var hasData=actives.data('bs.collapse');if(hasData&&hasData.transitioning)return;actives.collapse('hide');hasData||actives.data('bs.collapse',null);}var dimension=this.dimension();this.$element.removeClass('collapse').addClass('collapsing')[dimension](0);this.transitioning=1;var complete=function(){this.$element.removeClass('collapsing').addClass('in')[dimension]('auto');this.transitioning=0;this.$element.trigger('shown.bs.collapse');};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(['scroll',dimension].join('-'));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize]);};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass('in'))return;var startEvent=$.Event('hide.bs.collapse');this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass('collapsing').removeClass('collapse').removeClass('in');this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.trigger('hidden.bs.collapse').removeClass('collapsing').addClass('collapse');};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350);};Collapse.prototype.toggle=function(){this[this.$element.hasClass('in')?'hide':'show']();};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.collapse');var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=='object'&&option);if(!data)$this.data('bs.collapse',(data=new Collapse(this,options)));if(typeof option=='string')data[option]();});};$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this;};$(document).on('click.bs.collapse.data-api','[data-toggle=collapse]',function(e){var $this=$(this),href;var target=$this.attr('data-target')||e.preventDefault()||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,'');var $target=$(target);var data=$target.data('bs.collapse');var option=data?'toggle':$this.data();var parent=$this.attr('data-parent');var $parent=parent&&$(parent);if(!data||!data.transitioning){if($parent)$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass('collapsed');$this[$target.hasClass('in')?'addClass':'removeClass']('collapsed');}$target.collapse(option);});}(jQuery);+function($){"use strict";var backdrop='.dropdown-backdrop';var toggle='[data-toggle=dropdown]';var Dropdown=function(element){$(element).on('click.bs.dropdown',this.toggle);};Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is('.disabled, :disabled'))return;var $parent=getParent($this);var isActive=$parent.hasClass('open');clearMenus();if(!isActive){if('ontouchstart' in document.documentElement&&!$parent.closest('.navbar-nav').length)$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click',clearMenus);$parent.trigger(e=$.Event('show.bs.dropdown'));if(e.isDefaultPrevented())return;$parent.toggleClass('open').trigger('shown.bs.dropdown');$this.focus();}return false;};Dropdown.prototype.keydown=function(e){if(!/(38|40|27)/.test(e.keyCode))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is('.disabled, :disabled'))return;var $parent=getParent($this);var isActive=$parent.hasClass('open');if(!isActive||(isActive&&e.keyCode==27)){if(e.which==27)$parent.find(toggle).focus();return $this.click();}var $items=$('[role=menu] li:not(.divider):visible a',$parent);if(!$items.length)return;var index=$items.index($items.filter(':focus'));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).focus();};function clearMenus(){$(backdrop).remove();$(toggle).each(function(e){var $parent=getParent($(this));if(!$parent.hasClass('open'))return;$parent.trigger(e=$.Event('hide.bs.dropdown'));if(e.isDefaultPrevented())return;$parent.removeClass('open').trigger('hidden.bs.dropdown');});}function getParent($this){var selector=$this.attr('data-target');if(!selector){selector=$this.attr('href');selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'');}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent();}var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.dropdown');if(!data)$this.data('bs.dropdown',(data=new Dropdown(this)));if(typeof option=='string')data[option].call($this);});};$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this;};$(document).on('click.bs.dropdown.data-api',clearMenus).on('click.bs.dropdown.data-api','.dropdown form',function(e){e.stopPropagation();}).on('click.bs.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.bs.dropdown.data-api',toggle+', [role=menu]',Dropdown.prototype.keydown);}(jQuery);+function($){"use strict";var Modal=function(element,options){this.options=options;this.$element=$(element);this.$backdrop=this.isShown=null;if(this.options.remote)this.$element.load(this.options.remote);};Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this[!this.isShown?'show':'hide'](_relatedTarget);};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event('show.bs.modal',{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.escape();this.$element.on('click.dismiss.modal','[data-dismiss="modal"]',$.proxy(this.hide,this));this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade');if(!that.$element.parent().length)that.$element.appendTo(document.body);that.$element.show();if(transition)that.$element[0].offsetWidth;that.$element.addClass('in').attr('aria-hidden',false);that.enforceFocus();var e=$.Event('shown.bs.modal',{relatedTarget:_relatedTarget});transition?that.$element.find('.modal-dialog').one($.support.transition.end,function(){that.$element.focus().trigger(e);}).emulateTransitionEnd(300):that.$element.focus().trigger(e);});};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event('hide.bs.modal');this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off('focusin.bs.modal');this.$element.removeClass('in').attr('aria-hidden',true).off('click.dismiss.modal');$.support.transition&&this.$element.hasClass('fade')?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal();};Modal.prototype.enforceFocus=function(){$(document).off('focusin.bs.modal').on('focusin.bs.modal',$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length)this.$element.focus();},this));};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on('keyup.dismiss.bs.modal',$.proxy(function(e){e.which==27&&this.hide();},this));else if(!this.isShown)this.$element.off('keyup.dismiss.bs.modal');};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();that.$element.trigger('hidden.bs.modal');});};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null;};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass('fade')?'fade':'';if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);this.$element.on('click.dismiss.modal',$.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=='static'?this.$element[0].focus.call(this.$element[0]):this.hide.call(this);},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass('in');if(!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback();}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in');$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback();}else if(callback)callback();};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data('bs.modal');var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=='object'&&option);if(!data)$this.data('bs.modal',(data=new Modal(this,options)));if(typeof option=='string')data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget);});};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this;};$(document).on('click.bs.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr('href');var $target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')));var option=$target.data('modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option,this).one('hide',function(){$this.is(':visible')&&$this.focus();});});$(document).on('show.bs.modal','.modal',function(){$(document.body).addClass('modal-open');}).on('hidden.bs.modal','.modal',function(){$(document.body).removeClass('modal-open');});}(jQuery);+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init('tooltip',element,options);};Tooltip.DEFAULTS={animation:true,placement:'top',selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:false,container:false};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);var triggers=this.options.trigger.split(' ');for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=='click')this.$element.on('click.'+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!='manual'){var eventIn=trigger=='hover'?'mouseenter':'focus';var eventOut=trigger=='hover'?'mouseleave':'blur';this.$element.on(eventIn+'.'+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+'.'+this.type,this.options.selector,$.proxy(this.leave,this));}}this.options.selector?(this._options=$.extend({},this.options,{trigger:'manual',selector:''})):this.fixTitle();};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS;};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=='number')options.delay={show:options.delay,hide:options.delay};return options;};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value;});return options;};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type);clearTimeout(self.timeout);self.hoverState='in';if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=='in')self.show();},self.options.delay.show);};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type);clearTimeout(self.timeout);self.hoverState='out';if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=='out')self.hide();},self.options.delay.hide);};Tooltip.prototype.show=function(){var e=$.Event('show.bs.'+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);if(e.isDefaultPrevented())return;var $tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass('fade');var placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,'')||'top';$tip.detach().css({top:0,left:0,display:'block'}).addClass(placement);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent();var orgPlacement=placement;var docScroll=document.documentElement.scrollTop||document.body.scrollTop;var parentWidth=this.options.container=='body'?window.innerWidth:$parent.outerWidth();var parentHeight=this.options.container=='body'?window.innerHeight:$parent.outerHeight();var parentLeft=this.options.container=='body'?0:$parent.offset().left;placement=placement=='bottom'&&pos.top+pos.height+actualHeight-docScroll>parentHeight?'top':placement=='top'&&pos.top-docScroll-actualHeight<0?'bottom':placement=='right'&&pos.right+actualWidth>parentWidth?'left':placement=='left'&&pos.left-actualWidth<parentLeft?'right':placement;$tip.removeClass(orgPlacement).addClass(placement);}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);this.$element.trigger('shown.bs.'+this.type);}};Tooltip.prototype.applyPlacement=function(offset,placement){var replace;var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css('margin-top'),10);var marginLeft=parseInt($tip.css('margin-left'),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top=offset.top+marginTop;offset.left=offset.left+marginLeft;$tip.offset(offset).addClass('in');var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=='top'&&actualHeight!=height){replace=true;offset.top=offset.top+height-actualHeight;}if(/bottom|top/.test(placement)){var delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;}this.replaceArrow(delta-width+actualWidth,actualWidth,'left');}else this.replaceArrow(actualHeight-height,actualHeight,'top');if(replace)$tip.offset(offset);};Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?(50*(1-delta/dimension)+"%"):'');};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find('.tooltip-inner')[this.options.html?'html':'text'](title);$tip.removeClass('fade in top bottom left right');};Tooltip.prototype.hide=function(){var that=this;var $tip=this.tip();var e=$.Event('hide.bs.'+this.type);function complete(){if(that.hoverState!='in')$tip.detach();}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass('in');$.support.transition&&this.$tip.hasClass('fade')?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete();this.$element.trigger('hidden.bs.'+this.type);return this;};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr('title')||typeof ($e.attr('data-original-title'))!='string')$e.attr('data-original-title',$e.attr('title')||'').attr('title','');};Tooltip.prototype.hasContent=function(){return this.getTitle();};Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},(typeof el.getBoundingClientRect=='function')?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset());};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=='bottom'?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=='top'?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=='left'?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr('data-original-title')||(typeof o.title=='function'?o.title.call($e[0]):o.title);return title;};Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template);};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find('.tooltip-arrow');};Tooltip.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null;}};Tooltip.prototype.enable=function(){this.enabled=true;};Tooltip.prototype.disable=function(){this.enabled=false;};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled;};Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data('bs.'+this.type):this;self.tip().hasClass('in')?self.leave(self):self.enter(self);};Tooltip.prototype.destroy=function(){this.hide().$element.off('.'+this.type).removeData('bs.'+this.type);};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.tooltip');var options=typeof option=='object'&&option;if(!data)$this.data('bs.tooltip',(data=new Tooltip(this,options)));if(typeof option=='string')data[option]();});};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this;};}(jQuery);+function($){"use strict";var Popover=function(element,options){this.init('popover',element,options);};if(!$.fn.tooltip)throw new Error('Popover requires tooltip.js');Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:'right',trigger:'click',content:'',template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS;};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find('.popover-title')[this.options.html?'html':'text'](title);$tip.find('.popover-content')[this.options.html?'html':'text'](content);$tip.removeClass('fade top bottom left right in');if(!$tip.find('.popover-title').html())$tip.find('.popover-title').hide();};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent();};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr('data-content')||(typeof o.content=='function'?o.content.call($e[0]):o.content);};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find('.arrow');};Popover.prototype.tip=function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip;};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.popover');var options=typeof option=='object'&&option;if(!data)$this.data('bs.popover',(data=new Popover(this,options)));if(typeof option=='string')data[option]();});};$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this;};}(jQuery);+function($){"use strict";function ScrollSpy(element,options){var href;var process=$.proxy(this.process,this);this.$element=$(element).is('body')?$(window):$(element);this.$body=$('body');this.$scrollElement=this.$element.on('scroll.bs.scroll-spy.data-api',process);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||((href=$(element).attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''))||'')+' .nav li > a';this.offsets=$([]);this.targets=$([]);this.activeTarget=null;this.refresh();this.process();}ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?'offset':'position';this.offsets=$([]);this.targets=$([]);var self=this;var $targets=this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data('target')||$el.attr('href');var $href=/^#\w/.test(href)&&$(href);return($href&&$href.length&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]])||null;}).sort(function(a,b){return a[0]-b[0];}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1]);});};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight;var maxScroll=scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i]);};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;$(this.selector).parents('.active').removeClass('active');var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents('li').addClass('active');if(active.parent('.dropdown-menu').length)active=active.closest('li.dropdown').addClass('active');active.trigger('activate.bs.scrollspy');};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.scrollspy');var options=typeof option=='object'&&option;if(!data)$this.data('bs.scrollspy',(data=new ScrollSpy(this,options)));if(typeof option=='string')data[option]();});};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this;};$(window).on('load',function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data());});});}(jQuery);+function($){"use strict";var Tab=function(element){this.element=$(element);};Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest('ul:not(.dropdown-menu)');var selector=$this.data('target');if(!selector){selector=$this.attr('href');selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'');}if($this.parent('li').hasClass('active'))return;var previous=$ul.find('.active:last a')[0];var e=$.Event('show.bs.tab',{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;var $target=$(selector);this.activate($this.parent('li'),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:'shown.bs.tab',relatedTarget:previous});});};Tab.prototype.activate=function(element,container,callback){var $active=container.find('> .active');var transition=callback&&$.support.transition&&$active.hasClass('fade');function next(){$active.removeClass('active').find('> .dropdown-menu > .active').removeClass('active');element.addClass('active');if(transition){element[0].offsetWidth;element.addClass('in');}else element.removeClass('fade');if(element.parent('.dropdown-menu'))element.closest('li.dropdown').addClass('active');callback&&callback();}transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next();$active.removeClass('in');};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.tab');if(!data)$this.data('bs.tab',(data=new Tab(this)));if(typeof option=='string')data[option]();});};$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this;};$(document).on('click.bs.tab.data-api','[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();$(this).tab('show');});}(jQuery);+function($){"use strict";var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$window=$(window).on('scroll.bs.affix.data-api',$.proxy(this.checkPosition,this)).on('click.bs.affix.data-api',$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=this.unpin=null;this.checkPosition();};Affix.RESET='affix affix-top affix-bottom';Affix.DEFAULTS={offset:0};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1);};Affix.prototype.checkPosition=function(){if(!this.$element.is(':visible'))return;var scrollHeight=$(document).height();var scrollTop=this.$window.scrollTop();var position=this.$element.offset();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;if(typeof offset!='object')offsetBottom=offsetTop=offset;if(typeof offsetTop=='function')offsetTop=offset.top();if(typeof offsetBottom=='function')offsetBottom=offset.bottom();var affix=this.unpin!=null&&(scrollTop+this.unpin<=position.top)?false:offsetBottom!=null&&(position.top+this.$element.height()>=scrollHeight-offsetBottom)?'bottom':offsetTop!=null&&(scrollTop<=offsetTop)?'top':false;if(this.affixed===affix)return;if(this.unpin)this.$element.css('top','');this.affixed=affix;this.unpin=affix=='bottom'?position.top-scrollTop:null;this.$element.removeClass(Affix.RESET).addClass('affix'+(affix?'-'+affix:''));if(affix=='bottom')this.$element.offset({top:document.body.offsetHeight-offsetBottom-this.$element.height()});};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this);var data=$this.data('bs.affix');var options=typeof option=='object'&&option;if(!data)$this.data('bs.affix',(data=new Affix(this,options)));if(typeof option=='string')data[option]();});};$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this;};$(window).on('load',function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom)data.offset.bottom=data.offsetBottom;if(data.offsetTop)data.offset.top=data.offsetTop;$spy.affix(data);});});}(jQuery);
(function(window,document,undefined){"use strict";var _html2canvas={},previousElement,computedCSS,html2canvas;_html2canvas.Util={};_html2canvas.Util.log=function(a){if(_html2canvas.logging&&window.console&&window.console.log)window.console.log(a);};_html2canvas.Util.trimText=(function(isNative){return function(input){return isNative?isNative.apply(input):((input||'')+'').replace(/^\s+|\s+$/g,'');};})(String.prototype.trim);_html2canvas.Util.asFloat=function(v){return parseFloat(v);};(function(){var TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;var TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;_html2canvas.Util.parseTextShadows=function(value){if(!value||value==='none')return [];var shadows=value.match(TEXT_SHADOW_PROPERTY),results=[];for(var i=0;shadows&&(i<shadows.length);i++){var s=shadows[i].match(TEXT_SHADOW_VALUES);results.push({color:s[0],offsetX:s[1]?s[1].replace('px',''):0,offsetY:s[2]?s[2].replace('px',''):0,blur:s[3]?s[3].replace('px',''):0});}return results;};})();_html2canvas.Util.parseBackgroundImage=function(value){var whitespace=' \r\n\t',method,definition,prefix,prefix_i,block,results=[],c,mode=0,numParen=0,quote,args;var appendResult=function(){if(method){if(definition.substr(0,1)==='"')definition=definition.substr(1,definition.length-2);if(definition)args.push(definition);if(method.substr(0,1)==='-'&&(prefix_i=method.indexOf('-',1)+1)>0){prefix=method.substr(0,prefix_i);method=method.substr(prefix_i);}results.push({prefix:prefix,method:method.toLowerCase(),value:block,args:args});}args=[];method=prefix=definition=block='';};appendResult();for(var i=0,ii=value.length;i<ii;i++){c=value[i];if(mode===0&&whitespace.indexOf(c)>-1)continue;switch(c){case '"':if(!quote)quote=c;else if(quote===c)quote=null;break;case '(':if(quote)break;else if(mode===0){mode=1;block+=c;continue;}else numParen++;break;case ')':if(quote)break;else if(mode===1)if(numParen===0){mode=0;block+=c;appendResult();continue;}else numParen--;break;case ',':if(quote)break;else if(mode===0){appendResult();continue;}else if(mode===1)if(numParen===0&&!method.match(/^url$/i)){args.push(definition);definition='';block+=c;continue;}break;}block+=c;if(mode===0)method+=c;else definition+=c;}appendResult();return results;};_html2canvas.Util.Bounds=function(element){var clientRect,bounds={};if(element.getBoundingClientRect){clientRect=element.getBoundingClientRect();bounds.top=clientRect.top;bounds.bottom=clientRect.bottom||(clientRect.top+clientRect.height);bounds.left=clientRect.left;bounds.width=element.offsetWidth;bounds.height=element.offsetHeight;}return bounds;};_html2canvas.Util.OffsetBounds=function(element){var parent=element.offsetParent?_html2canvas.Util.OffsetBounds(element.offsetParent):{top:0,left:0};return{top:element.offsetTop+parent.top,bottom:element.offsetTop+element.offsetHeight+parent.top,left:element.offsetLeft+parent.left,width:element.offsetWidth,height:element.offsetHeight};};function toPX(element,attribute,value){var rsLeft=element.runtimeStyle&&element.runtimeStyle[attribute],left,style=element.style;if(!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(value)&&/^-?\d/.test(value)){left=style.left;if(rsLeft)element.runtimeStyle.left=element.currentStyle.left;style.left=attribute==="fontSize"?"1em":(value||0);value=style.pixelLeft+"px";style.left=left;if(rsLeft)element.runtimeStyle.left=rsLeft;}if(!/^(thin|medium|thick)$/i.test(value))return Math.round(parseFloat(value))+"px";return value;}function asInt(val){return parseInt(val,10);}function isPercentage(value){return value.toString().indexOf("%")!==-1;}function parseBackgroundSizePosition(value,element,attribute,index){value=(value||'').split(',');value=value[index||0]||value[0]||'auto';value=_html2canvas.Util.trimText(value).split(' ');if(attribute==='backgroundSize'&&(value[0]&&value[0].match(/^(cover|contain|auto)$/)))return value;else{value[0]=(value[0].indexOf("%")===-1)?toPX(element,attribute+"X",value[0]):value[0];if(value[1]===undefined)if(attribute==='backgroundSize'){value[1]='auto';return value;}else value[1]=value[0];value[1]=(value[1].indexOf("%")===-1)?toPX(element,attribute+"Y",value[1]):value[1];}return value;}_html2canvas.Util.getCSS=function(element,attribute,index){if(previousElement!==element)computedCSS=document.defaultView.getComputedStyle(element,null);var value=computedCSS[attribute];if(/^background(Size|Position)$/.test(attribute))return parseBackgroundSizePosition(value,element,attribute,index);else if(/border(Top|Bottom)(Left|Right)Radius/.test(attribute)){var arr=value.split(" ");if(arr.length<=1)arr[1]=arr[0];return arr.map(asInt);}return value;};_html2canvas.Util.resizeBounds=function(current_width,current_height,target_width,target_height,stretch_mode){var target_ratio=target_width/target_height,current_ratio=current_width/current_height,output_width,output_height;if(!stretch_mode||stretch_mode==='auto'){output_width=target_width;output_height=target_height;}else if(target_ratio<current_ratio^stretch_mode==='contain'){output_height=target_height;output_width=target_height*current_ratio;}else{output_width=target_width;output_height=target_width/current_ratio;}return{width:output_width,height:output_height};};_html2canvas.Util.BackgroundPosition=function(element,bounds,image,imageIndex,backgroundSize){var backgroundPosition=_html2canvas.Util.getCSS(element,'backgroundPosition',imageIndex),leftPosition,topPosition;if(backgroundPosition.length===1)backgroundPosition=[backgroundPosition[0],backgroundPosition[0]];if(isPercentage(backgroundPosition[0]))leftPosition=(bounds.width-(backgroundSize||image).width)*(parseFloat(backgroundPosition[0])/100);else leftPosition=parseInt(backgroundPosition[0],10);if(backgroundPosition[1]==='auto')topPosition=leftPosition/image.width*image.height;else if(isPercentage(backgroundPosition[1]))topPosition=(bounds.height-(backgroundSize||image).height)*parseFloat(backgroundPosition[1])/100;else topPosition=parseInt(backgroundPosition[1],10);if(backgroundPosition[0]==='auto')leftPosition=topPosition/image.height*image.width;return{left:leftPosition,top:topPosition};};_html2canvas.Util.BackgroundSize=function(element,bounds,image,imageIndex){var backgroundSize=_html2canvas.Util.getCSS(element,'backgroundSize',imageIndex),width,height;if(backgroundSize.length===1)backgroundSize=[backgroundSize[0],backgroundSize[0]];if(isPercentage(backgroundSize[0]))width=bounds.width*parseFloat(backgroundSize[0])/100;else if(/contain|cover/.test(backgroundSize[0]))return _html2canvas.Util.resizeBounds(image.width,image.height,bounds.width,bounds.height,backgroundSize[0]);else width=parseInt(backgroundSize[0],10);if(backgroundSize[0]==='auto'&&backgroundSize[1]==='auto')height=image.height;else if(backgroundSize[1]==='auto')height=width/image.width*image.height;else if(isPercentage(backgroundSize[1]))height=bounds.height*parseFloat(backgroundSize[1])/100;else height=parseInt(backgroundSize[1],10);if(backgroundSize[0]==='auto')width=height/image.height*image.width;return{width:width,height:height};};_html2canvas.Util.BackgroundRepeat=function(element,imageIndex){var backgroundRepeat=_html2canvas.Util.getCSS(element,"backgroundRepeat").split(",").map(_html2canvas.Util.trimText);return backgroundRepeat[imageIndex]||backgroundRepeat[0];};_html2canvas.Util.Extend=function(options,defaults){for(var key in options)if(options.hasOwnProperty(key))defaults[key]=options[key];return defaults;};_html2canvas.Util.Children=function(elem){var children;try{children=(elem.nodeName&&elem.nodeName.toUpperCase()==="IFRAME")?elem.contentDocument||elem.contentWindow.document:(function(array){var ret=[];if(array!==null)(function(first,second){var i=first.length,j=0;if(typeof second.length==="number")for(var l=second.length;j<l;j++)first[i++]=second[j];else while(second[j]!==undefined)first[i++]=second[j++];first.length=i;return first;})(ret,array);return ret;})(elem.childNodes);}catch(ex){_html2canvas.Util.log("html2canvas.Util.Children failed with exception: "+ex.message);children=[];}return children;};_html2canvas.Util.isTransparent=function(backgroundColor){return(!backgroundColor||backgroundColor==="transparent"||backgroundColor==="rgba(0, 0, 0, 0)");};_html2canvas.Util.Font=(function(){var fontData={};return function(font,fontSize,doc){if(fontData[font+"-"+fontSize]!==undefined)return fontData[font+"-"+fontSize];var container=doc.createElement('div'),img=doc.createElement('img'),span=doc.createElement('span'),sampleText='Hidden Text',baseline,middle,metricsObj;container.style.visibility="hidden";container.style.fontFamily=font;container.style.fontSize=fontSize;container.style.margin=0;container.style.padding=0;doc.body.appendChild(container);img.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";img.width=1;img.height=1;img.style.margin=0;img.style.padding=0;img.style.verticalAlign="baseline";span.style.fontFamily=font;span.style.fontSize=fontSize;span.style.margin=0;span.style.padding=0;span.appendChild(doc.createTextNode(sampleText));container.appendChild(span);container.appendChild(img);baseline=(img.offsetTop-span.offsetTop)+1;container.removeChild(span);container.appendChild(doc.createTextNode(sampleText));container.style.lineHeight="normal";img.style.verticalAlign="super";middle=(img.offsetTop-container.offsetTop)+1;metricsObj={baseline:baseline,lineWidth:1,middle:middle};fontData[font+"-"+fontSize]=metricsObj;doc.body.removeChild(container);return metricsObj;};})();(function(){var Util=_html2canvas.Util,Generate={};_html2canvas.Generate=Generate;var reGradients=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];Generate.parseGradient=function(css,bounds){var gradient,i,len=reGradients.length,m1,stop,m2,m2Len,step,m3,tl,tr,br,bl;for(i=0;i<len;i+=1){m1=css.match(reGradients[i]);if(m1)break;}if(m1)switch(m1[1]){case '-webkit-linear-gradient':case '-o-linear-gradient':gradient={type:'linear',x0:null,y0:null,x1:null,y1:null,colorStops:[]};m2=m1[2].match(/\w+/g);if(m2){m2Len=m2.length;for(i=0;i<m2Len;i+=1)switch(m2[i]){case 'top':gradient.y0=0;gradient.y1=bounds.height;break;case 'right':gradient.x0=bounds.width;gradient.x1=0;break;case 'bottom':gradient.y0=bounds.height;gradient.y1=0;break;case 'left':gradient.x0=0;gradient.x1=bounds.width;break;}}if(gradient.x0===null&&gradient.x1===null)gradient.x0=gradient.x1=bounds.width/2;if(gradient.y0===null&&gradient.y1===null)gradient.y0=gradient.y1=bounds.height/2;m2=m1[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(m2){m2Len=m2.length;step=1/Math.max(m2Len-1,1);for(i=0;i<m2Len;i+=1){m3=m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(m3[2]){stop=parseFloat(m3[2]);if(m3[3]==='%')stop/=100;else stop/=bounds.width;}else stop=i*step;gradient.colorStops.push({color:m3[1],stop:stop});}}break;case '-webkit-gradient':gradient={type:m1[2]==='radial'?'circle':m1[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]};m2=m1[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/);if(m2){gradient.x0=(m2[1]*bounds.width)/100;gradient.y0=(m2[2]*bounds.height)/100;gradient.x1=(m2[3]*bounds.width)/100;gradient.y1=(m2[4]*bounds.height)/100;}m2=m1[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g);if(m2){m2Len=m2.length;for(i=0;i<m2Len;i+=1){m3=m2[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/);stop=parseFloat(m3[2]);if(m3[1]==='from')stop=0.0;if(m3[1]==='to')stop=1.0;gradient.colorStops.push({color:m3[3],stop:stop});}}break;case '-moz-linear-gradient':gradient={type:'linear',x0:0,y0:0,x1:0,y1:0,colorStops:[]};m2=m1[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(m2){gradient.x0=(m2[1]*bounds.width)/100;gradient.y0=(m2[2]*bounds.height)/100;gradient.x1=bounds.width-gradient.x0;gradient.y1=bounds.height-gradient.y0;}m2=m1[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g);if(m2){m2Len=m2.length;step=1/Math.max(m2Len-1,1);for(i=0;i<m2Len;i+=1){m3=m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/);if(m3[2]){stop=parseFloat(m3[2]);if(m3[3])stop/=100;}else stop=i*step;gradient.colorStops.push({color:m3[1],stop:stop});}}break;case '-webkit-radial-gradient':case '-moz-radial-gradient':case '-o-radial-gradient':gradient={type:'circle',x0:0,y0:0,x1:bounds.width,y1:bounds.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]};m2=m1[2].match(/(\d{1,3})%?\s(\d{1,3})%?/);if(m2){gradient.cx=(m2[1]*bounds.width)/100;gradient.cy=(m2[2]*bounds.height)/100;}m2=m1[3].match(/\w+/);m3=m1[4].match(/[a-z\-]*/);if(m2&&m3)switch(m3[0]){case 'farthest-corner':case 'cover':case '':tl=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.cy,2));tr=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2));br=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2));bl=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.cy,2));gradient.rx=gradient.ry=Math.max(tl,tr,br,bl);break;case 'closest-corner':tl=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.cy,2));tr=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2));br=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2));bl=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.cy,2));gradient.rx=gradient.ry=Math.min(tl,tr,br,bl);break;case 'farthest-side':if(m2[0]==='circle')gradient.rx=gradient.ry=Math.max(gradient.cx,gradient.cy,gradient.x1-gradient.cx,gradient.y1-gradient.cy);else{gradient.type=m2[0];gradient.rx=Math.max(gradient.cx,gradient.x1-gradient.cx);gradient.ry=Math.max(gradient.cy,gradient.y1-gradient.cy);}break;case 'closest-side':case 'contain':if(m2[0]==='circle')gradient.rx=gradient.ry=Math.min(gradient.cx,gradient.cy,gradient.x1-gradient.cx,gradient.y1-gradient.cy);else{gradient.type=m2[0];gradient.rx=Math.min(gradient.cx,gradient.x1-gradient.cx);gradient.ry=Math.min(gradient.cy,gradient.y1-gradient.cy);}break;}m2=m1[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g);if(m2){m2Len=m2.length;step=1/Math.max(m2Len-1,1);for(i=0;i<m2Len;i+=1){m3=m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/);if(m3[2]){stop=parseFloat(m3[2]);if(m3[3]==='%')stop/=100;else stop/=bounds.width;}else stop=i*step;gradient.colorStops.push({color:m3[1],stop:stop});}}break;}return gradient;};function addScrollStops(grad){return function(colorStop){try{grad.addColorStop(colorStop.stop,colorStop.color);}catch(e){Util.log(['failed to add color stop: ',e,'; tried to add: ',colorStop]);}};}Generate.Gradient=function(src,bounds){if(bounds.width===0||bounds.height===0)return;var canvas=document.createElement('canvas'),ctx=canvas.getContext('2d'),gradient,grad;canvas.width=bounds.width;canvas.height=bounds.height;gradient=_html2canvas.Generate.parseGradient(src,bounds);if(gradient)switch(gradient.type){case 'linear':grad=ctx.createLinearGradient(gradient.x0,gradient.y0,gradient.x1,gradient.y1);gradient.colorStops.forEach(addScrollStops(grad));ctx.fillStyle=grad;ctx.fillRect(0,0,bounds.width,bounds.height);break;case 'circle':grad=ctx.createRadialGradient(gradient.cx,gradient.cy,0,gradient.cx,gradient.cy,gradient.rx);gradient.colorStops.forEach(addScrollStops(grad));ctx.fillStyle=grad;ctx.fillRect(0,0,bounds.width,bounds.height);break;case 'ellipse':var canvasRadial=document.createElement('canvas'),ctxRadial=canvasRadial.getContext('2d'),ri=Math.max(gradient.rx,gradient.ry),di=ri*2;canvasRadial.width=canvasRadial.height=di;grad=ctxRadial.createRadialGradient(gradient.rx,gradient.ry,0,gradient.rx,gradient.ry,ri);gradient.colorStops.forEach(addScrollStops(grad));ctxRadial.fillStyle=grad;ctxRadial.fillRect(0,0,di,di);ctx.fillStyle=gradient.colorStops[gradient.colorStops.length-1].color;ctx.fillRect(0,0,canvas.width,canvas.height);ctx.drawImage(canvasRadial,gradient.cx-gradient.rx,gradient.cy-gradient.ry,2*gradient.rx,2*gradient.ry);break;}return canvas;};Generate.ListAlpha=function(number){var tmp="",modulus;do{modulus=number%26;tmp=String.fromCharCode(modulus+64)+tmp;number=number/26;}while((number*26)>26);return tmp;};Generate.ListRoman=function(number){var romanArray=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],decimal=[1000,900,500,400,100,90,50,40,10,9,5,4,1],roman="",v,len=romanArray.length;if(number<=0||number>=4000)return number;for(v=0;v<len;v+=1)while(number>=decimal[v]){number-=decimal[v];roman+=romanArray[v];}return roman;};})();function h2cRenderContext(width,height){var storage=[];return{storage:storage,width:width,height:height,clip:function(){storage.push({type:"function",name:"clip",'arguments':arguments});},translate:function(){storage.push({type:"function",name:"translate",'arguments':arguments});},fill:function(){storage.push({type:"function",name:"fill",'arguments':arguments});},save:function(){storage.push({type:"function",name:"save",'arguments':arguments});},restore:function(){storage.push({type:"function",name:"restore",'arguments':arguments});},fillRect:function(){storage.push({type:"function",name:"fillRect",'arguments':arguments});},createPattern:function(){storage.push({type:"function",name:"createPattern",'arguments':arguments});},drawShape:function(){var shape=[];storage.push({type:"function",name:"drawShape",'arguments':shape});return{moveTo:function(){shape.push({name:"moveTo",'arguments':arguments});},lineTo:function(){shape.push({name:"lineTo",'arguments':arguments});},arcTo:function(){shape.push({name:"arcTo",'arguments':arguments});},bezierCurveTo:function(){shape.push({name:"bezierCurveTo",'arguments':arguments});},quadraticCurveTo:function(){shape.push({name:"quadraticCurveTo",'arguments':arguments});}};},drawImage:function(){storage.push({type:"function",name:"drawImage",'arguments':arguments});},fillText:function(){storage.push({type:"function",name:"fillText",'arguments':arguments});},setVariable:function(variable,value){storage.push({type:"variable",name:variable,'arguments':value});return value;}};}_html2canvas.Parse=function(images,options,cb){window.scroll(0,0);var element=((options.elements===undefined)?document.body:options.elements[0]),numDraws=0,doc=element.ownerDocument,Util=_html2canvas.Util,support=Util.Support(options,doc),ignoreElementsRegExp=new RegExp("("+options.ignoreElements+")"),body=doc.body,getCSS=Util.getCSS,pseudoHide="___html2canvas___pseudoelement",hidePseudoElementsStyles=doc.createElement('style');hidePseudoElementsStyles.innerHTML='.'+pseudoHide+'-parent:before { content: "" !important; display: none !important; }'+'.'+pseudoHide+'-parent:after { content: "" !important; display: none !important; }';body.appendChild(hidePseudoElementsStyles);images=images||{};init();function init(){var background=getCSS(document.documentElement,"backgroundColor"),transparentBackground=(Util.isTransparent(background)&&element===document.body),stack=renderElement(element,null,false,transparentBackground);addPseudoElements(element);parseChildren(element,stack,function(){if(transparentBackground)background=stack.backgroundColor;removePseudoElements();Util.log('Done parsing, moving to Render.');cb({backgroundColor:background,stack:stack});});}function addPseudoElements(el){var jobs=[],classes=[];getPseudoElementClasses();findPseudoElements(el);runJobs();function getPseudoElementClasses(){var findPsuedoEls=/:before|:after/;var sheets=document.styleSheets;for(var i=0,j=sheets.length;i<j;i++)try{var rules=sheets[i].cssRules;for(var k=0,l=rules.length;k<l;k++)if(findPsuedoEls.test(rules[k].selectorText))classes.push(rules[k].selectorText);}catch(e){}for(i=0,j=classes.length;i<j;i++)classes[i]=classes[i].match(/(^[^:]*)/)[1].replace(/(\s+[>]\s+$)|([,]\s+$)/,'');}function findPseudoElements(el){var els=document.querySelectorAll(classes.join(','));for(var i=0,j=els.length;i<j;i++)createPseudoElements(els[i]);}function createPseudoElements(el){var before=getPseudoElement(el,':before'),after=getPseudoElement(el,':after');if(before)jobs.push({type:'before',pseudo:before,el:el});if(after)jobs.push({type:'after',pseudo:after,el:el});}function runJobs(){jobs.forEach(function(job){addClass(job.el,pseudoHide+"-parent");});jobs.forEach(function(job){if(job.type==='before')job.el.insertBefore(job.pseudo,job.el.firstChild);else job.el.appendChild(job.pseudo);});}}function removePseudoElements(){body.removeChild(hidePseudoElementsStyles);var pseudos=document.getElementsByClassName(pseudoHide+"-element");while(pseudos.length)pseudos[0].parentNode.removeChild(pseudos[0]);var parents=document.getElementsByClassName(pseudoHide+"-parent");while(parents.length)removeClass(parents[0],pseudoHide+"-parent");}function addClass(el,className){if(el.classList)el.classList.add(className);else el.className=el.className+" "+className;}function removeClass(el,className){if(el.classList)el.classList.remove(className);else el.className=el.className.replace(className,"").trim();}function hasClass(el,className){return el.className.indexOf(className)>-1;}function nodeListToArray(nodeList){return Array.prototype.slice.call(nodeList);}function documentWidth(){return Math.max(Math.max(doc.body.scrollWidth,doc.documentElement.scrollWidth),Math.max(doc.body.offsetWidth,doc.documentElement.offsetWidth),Math.max(doc.body.clientWidth,doc.documentElement.clientWidth));}function documentHeight(){return Math.max(Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight),Math.max(doc.body.offsetHeight,doc.documentElement.offsetHeight),Math.max(doc.body.clientHeight,doc.documentElement.clientHeight));}function getCSSInt(element,attribute){var val=parseInt(getCSS(element,attribute),10);return(isNaN(val))?0:val;}function renderRect(ctx,x,y,w,h,bgcolor){if(bgcolor!=="transparent"){ctx.setVariable("fillStyle",bgcolor);ctx.fillRect(x,y,w,h);numDraws+=1;}}function capitalize(m,p1,p2){if(m.length>0)return p1+p2.toUpperCase();}function textTransform(text,transform){switch(transform){case "lowercase":return text.toLowerCase();case "capitalize":return text.replace(/(^|\s|:|-|\(|\))([a-z])/g,capitalize);case "uppercase":return text.toUpperCase();default:return text;}}function noLetterSpacing(letter_spacing){return(/^(normal|none|0px)$/.test(letter_spacing));}function drawText(currentText,x,y,ctx){if(currentText!==null&&Util.trimText(currentText).length>0){ctx.fillText(currentText,x,y);numDraws+=1;}}function setTextVariables(ctx,el,text_decoration,color){var align=false,bold=getCSS(el,"fontWeight"),family=getCSS(el,"fontFamily"),size=getCSS(el,"fontSize"),shadows=Util.parseTextShadows(getCSS(el,"textShadow"));switch(parseInt(bold,10)){case 401:bold="bold";break;case 400:bold="normal";break;}ctx.setVariable("fillStyle",color);ctx.setVariable("font",[getCSS(el,"fontStyle"),getCSS(el,"fontVariant"),bold,size,family].join(" "));ctx.setVariable("textAlign",align?"right":"left");if(shadows.length){ctx.setVariable("shadowColor",shadows[0].color);ctx.setVariable("shadowOffsetX",shadows[0].offsetX);ctx.setVariable("shadowOffsetY",shadows[0].offsetY);ctx.setVariable("shadowBlur",shadows[0].blur);}if(text_decoration!=="none")return Util.Font(family,size,doc);}function renderTextDecoration(ctx,text_decoration,bounds,metrics,color){switch(text_decoration){case "underline":renderRect(ctx,bounds.left,Math.round(bounds.top+metrics.baseline+metrics.lineWidth),bounds.width,1,color);break;case "overline":renderRect(ctx,bounds.left,Math.round(bounds.top),bounds.width,1,color);break;case "line-through":renderRect(ctx,bounds.left,Math.ceil(bounds.top+metrics.middle+metrics.lineWidth),bounds.width,1,color);break;}}function getTextBounds(state,text,textDecoration,isLast,transform){var bounds;if(support.rangeBounds&&!transform){if(textDecoration!=="none"||Util.trimText(text).length!==0)bounds=textRangeBounds(text,state.node,state.textOffset);state.textOffset+=text.length;}else if(state.node&&typeof state.node.nodeValue==="string"){var newTextNode=isLast?state.node.splitText(text.length):null;bounds=textWrapperBounds(state.node,transform);state.node=newTextNode;}return bounds;}function textRangeBounds(text,textNode,textOffset){var range=doc.createRange();range.setStart(textNode,textOffset);range.setEnd(textNode,textOffset+text.length);return range.getBoundingClientRect();}function textWrapperBounds(oldTextNode,transform){var parent=oldTextNode.parentNode,wrapElement=doc.createElement('wrapper'),backupText=oldTextNode.cloneNode(true);wrapElement.appendChild(oldTextNode.cloneNode(true));parent.replaceChild(wrapElement,oldTextNode);var bounds=transform?Util.OffsetBounds(wrapElement):Util.Bounds(wrapElement);parent.replaceChild(backupText,wrapElement);return bounds;}function renderText(el,textNode,stack){var ctx=stack.ctx,color=getCSS(el,"color"),textDecoration=getCSS(el,"textDecoration"),textAlign=getCSS(el,"textAlign"),metrics,textList,state={node:textNode,textOffset:0};if(Util.trimText(textNode.nodeValue).length>0){textNode.nodeValue=textTransform(textNode.nodeValue,getCSS(el,"textTransform"));textAlign=textAlign.replace(["-webkit-auto"],["auto"]);textList=(!options.letterRendering&&/^(left|right|justify|auto)$/.test(textAlign)&&noLetterSpacing(getCSS(el,"letterSpacing")))?textNode.nodeValue.split(/(\b| )/):textNode.nodeValue.split("");metrics=setTextVariables(ctx,el,textDecoration,color);if(options.chinese)textList.forEach(function(word,index){if(/.*[\u4E00-\u9FA5].*$/.test(word)){word=word.split("");word.unshift(index,1);textList.splice.apply(textList,word);}});textList.forEach(function(text,index){var bounds=getTextBounds(state,text,textDecoration,(index<textList.length-1),stack.transform.matrix);if(bounds){drawText(text,bounds.left,bounds.bottom,ctx);renderTextDecoration(ctx,textDecoration,bounds,metrics,color);}});}}function listPosition(element,val){var boundElement=doc.createElement("boundelement"),originalType,bounds;boundElement.style.display="inline";originalType=element.style.listStyleType;element.style.listStyleType="none";boundElement.appendChild(doc.createTextNode(val));element.insertBefore(boundElement,element.firstChild);bounds=Util.Bounds(boundElement);element.removeChild(boundElement);element.style.listStyleType=originalType;return bounds;}function elementIndex(el){var i=-1,count=1,childs=el.parentNode.childNodes;if(el.parentNode){while(childs[++i]!==el)if(childs[i].nodeType===1)count++;return count;}else return -1;}function listItemText(element,type){var currentIndex=elementIndex(element),text;switch(type){case "decimal":text=currentIndex;break;case "decimal-leading-zero":text=(currentIndex.toString().length===1)?currentIndex="0"+currentIndex.toString():currentIndex.toString();break;case "upper-roman":text=_html2canvas.Generate.ListRoman(currentIndex);break;case "lower-roman":text=_html2canvas.Generate.ListRoman(currentIndex).toLowerCase();break;case "lower-alpha":text=_html2canvas.Generate.ListAlpha(currentIndex).toLowerCase();break;case "upper-alpha":text=_html2canvas.Generate.ListAlpha(currentIndex);break;}return text+". ";}function renderListItem(element,stack,elBounds){var x,text,ctx=stack.ctx,type=getCSS(element,"listStyleType"),listBounds;if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(type)){text=listItemText(element,type);listBounds=listPosition(element,text);setTextVariables(ctx,element,"none",getCSS(element,"color"));if(getCSS(element,"listStylePosition")==="inside"){ctx.setVariable("textAlign","left");x=elBounds.left;}else return;drawText(text,x,listBounds.bottom,ctx);}}function loadImage(src){var img=images[src];return(img&&img.succeeded===true)?img.img:false;}function clipBounds(src,dst){var x=Math.max(src.left,dst.left),y=Math.max(src.top,dst.top),x2=Math.min((src.left+src.width),(dst.left+dst.width)),y2=Math.min((src.top+src.height),(dst.top+dst.height));return{left:x,top:y,width:x2-x,height:y2-y};}function setZ(element,stack,parentStack){var newContext,isPositioned=stack.cssPosition!=='static',zIndex=isPositioned?getCSS(element,'zIndex'):'auto',opacity=getCSS(element,'opacity'),isFloated=getCSS(element,'cssFloat')!=='none';stack.zIndex=newContext=h2czContext(zIndex);newContext.isPositioned=isPositioned;newContext.isFloated=isFloated;newContext.opacity=opacity;newContext.ownStacking=(zIndex!=='auto'||opacity<1);newContext.depth=parentStack?(parentStack.zIndex.depth+1):0;if(parentStack)parentStack.zIndex.children.push(stack);}function h2czContext(zindex){return{depth:0,zindex:zindex,children:[]};}function renderImage(ctx,element,image,bounds,borders){var paddingLeft=getCSSInt(element,'paddingLeft'),paddingTop=getCSSInt(element,'paddingTop'),paddingRight=getCSSInt(element,'paddingRight'),paddingBottom=getCSSInt(element,'paddingBottom');drawImage(ctx,image,0,0,image.width,image.height,bounds.left+paddingLeft+borders[3].width,bounds.top+paddingTop+borders[0].width,bounds.width-(borders[1].width+borders[3].width+paddingLeft+paddingRight),bounds.height-(borders[0].width+borders[2].width+paddingTop+paddingBottom));}function getBorderData(element){return ["Top","Right","Bottom","Left"].map(function(side){return{width:getCSSInt(element,'border'+side+'Width'),color:getCSS(element,'border'+side+'Color')};});}function getBorderRadiusData(element){return ["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(side){return getCSS(element,'border'+side+'Radius');});}function getCurvePoints(x,y,r1,r2){var kappa=4*((Math.sqrt(2)-1)/3);var ox=r1*kappa,oy=r2*kappa,xm=x+r1,ym=y+r2;return{topLeft:bezierCurve({x:x,y:ym},{x:x,y:ym-oy},{x:xm-ox,y:y},{x:xm,y:y}),topRight:bezierCurve({x:x,y:y},{x:x+ox,y:y},{x:xm,y:ym-oy},{x:xm,y:ym}),bottomRight:bezierCurve({x:xm,y:y},{x:xm,y:y+oy},{x:x+ox,y:ym},{x:x,y:ym}),bottomLeft:bezierCurve({x:xm,y:ym},{x:xm-ox,y:ym},{x:x,y:y+oy},{x:x,y:y})};}function bezierCurve(start,startControl,endControl,end){var lerp=function(a,b,t){return{x:a.x+(b.x-a.x)*t,y:a.y+(b.y-a.y)*t};};return{start:start,startControl:startControl,endControl:endControl,end:end,subdivide:function(t){var ab=lerp(start,startControl,t),bc=lerp(startControl,endControl,t),cd=lerp(endControl,end,t),abbc=lerp(ab,bc,t),bccd=lerp(bc,cd,t),dest=lerp(abbc,bccd,t);return [bezierCurve(start,ab,abbc,dest),bezierCurve(dest,bccd,cd,end)];},curveTo:function(borderArgs){borderArgs.push(["bezierCurve",startControl.x,startControl.y,endControl.x,endControl.y,end.x,end.y]);},curveToReversed:function(borderArgs){borderArgs.push(["bezierCurve",endControl.x,endControl.y,startControl.x,startControl.y,start.x,start.y]);}};}function parseCorner(borderArgs,radius1,radius2,corner1,corner2,x,y){if(radius1[0]>0||radius1[1]>0){borderArgs.push(["line",corner1[0].start.x,corner1[0].start.y]);corner1[0].curveTo(borderArgs);corner1[1].curveTo(borderArgs);}else borderArgs.push(["line",x,y]);if(radius2[0]>0||radius2[1]>0)borderArgs.push(["line",corner2[0].start.x,corner2[0].start.y]);}function drawSide(borderData,radius1,radius2,outer1,inner1,outer2,inner2){var borderArgs=[];if(radius1[0]>0||radius1[1]>0){borderArgs.push(["line",outer1[1].start.x,outer1[1].start.y]);outer1[1].curveTo(borderArgs);}else borderArgs.push(["line",borderData.c1[0],borderData.c1[1]]);if(radius2[0]>0||radius2[1]>0){borderArgs.push(["line",outer2[0].start.x,outer2[0].start.y]);outer2[0].curveTo(borderArgs);borderArgs.push(["line",inner2[0].end.x,inner2[0].end.y]);inner2[0].curveToReversed(borderArgs);}else{borderArgs.push(["line",borderData.c2[0],borderData.c2[1]]);borderArgs.push(["line",borderData.c3[0],borderData.c3[1]]);}if(radius1[0]>0||radius1[1]>0){borderArgs.push(["line",inner1[1].end.x,inner1[1].end.y]);inner1[1].curveToReversed(borderArgs);}else borderArgs.push(["line",borderData.c4[0],borderData.c4[1]]);return borderArgs;}function calculateCurvePoints(bounds,borderRadius,borders){var x=bounds.left,y=bounds.top,width=bounds.width,height=bounds.height,tlh=borderRadius[0][0],tlv=borderRadius[0][1],trh=borderRadius[1][0],trv=borderRadius[1][1],brh=borderRadius[2][0],brv=borderRadius[2][1],blh=borderRadius[3][0],blv=borderRadius[3][1],topWidth=width-trh,rightHeight=height-brv,bottomWidth=width-brh,leftHeight=height-blv;return{topLeftOuter:getCurvePoints(x,y,tlh,tlv).topLeft.subdivide(0.5),topLeftInner:getCurvePoints(x+borders[3].width,y+borders[0].width,Math.max(0,tlh-borders[3].width),Math.max(0,tlv-borders[0].width)).topLeft.subdivide(0.5),topRightOuter:getCurvePoints(x+topWidth,y,trh,trv).topRight.subdivide(0.5),topRightInner:getCurvePoints(x+Math.min(topWidth,width+borders[3].width),y+borders[0].width,(topWidth>width+borders[3].width)?0:trh-borders[3].width,trv-borders[0].width).topRight.subdivide(0.5),bottomRightOuter:getCurvePoints(x+bottomWidth,y+rightHeight,brh,brv).bottomRight.subdivide(0.5),bottomRightInner:getCurvePoints(x+Math.min(bottomWidth,width+borders[3].width),y+Math.min(rightHeight,height+borders[0].width),Math.max(0,brh-borders[1].width),Math.max(0,brv-borders[2].width)).bottomRight.subdivide(0.5),bottomLeftOuter:getCurvePoints(x,y+leftHeight,blh,blv).bottomLeft.subdivide(0.5),bottomLeftInner:getCurvePoints(x+borders[3].width,y+leftHeight,Math.max(0,blh-borders[3].width),Math.max(0,blv-borders[2].width)).bottomLeft.subdivide(0.5)};}function getBorderClip(element,borderPoints,borders,radius,bounds){var backgroundClip=getCSS(element,'backgroundClip'),borderArgs=[];switch(backgroundClip){case "content-box":case "padding-box":parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftInner,borderPoints.topRightInner,bounds.left+borders[3].width,bounds.top+borders[0].width);parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightInner,borderPoints.bottomRightInner,bounds.left+bounds.width-borders[1].width,bounds.top+borders[0].width);parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightInner,borderPoints.bottomLeftInner,bounds.left+bounds.width-borders[1].width,bounds.top+bounds.height-borders[2].width);parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftInner,borderPoints.topLeftInner,bounds.left+borders[3].width,bounds.top+bounds.height-borders[2].width);break;default:parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftOuter,borderPoints.topRightOuter,bounds.left,bounds.top);parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightOuter,borderPoints.bottomRightOuter,bounds.left+bounds.width,bounds.top);parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightOuter,borderPoints.bottomLeftOuter,bounds.left+bounds.width,bounds.top+bounds.height);parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftOuter,borderPoints.topLeftOuter,bounds.left,bounds.top+bounds.height);break;}return borderArgs;}function parseBorders(element,bounds,borders){var x=bounds.left,y=bounds.top,width=bounds.width,height=bounds.height,borderSide,bx,by,bw,bh,borderArgs,borderRadius=getBorderRadiusData(element),borderPoints=calculateCurvePoints(bounds,borderRadius,borders),borderData={clip:getBorderClip(element,borderPoints,borders,borderRadius,bounds),borders:[]};for(borderSide=0;borderSide<4;borderSide++)if(borders[borderSide].width>0){bx=x;by=y;bw=width;bh=height-(borders[2].width);switch(borderSide){case 0:bh=borders[0].width;borderArgs=drawSide({c1:[bx,by],c2:[bx+bw,by],c3:[bx+bw-borders[1].width,by+bh],c4:[bx+borders[3].width,by+bh]},borderRadius[0],borderRadius[1],borderPoints.topLeftOuter,borderPoints.topLeftInner,borderPoints.topRightOuter,borderPoints.topRightInner);break;case 1:bx=x+width-(borders[1].width);bw=borders[1].width;borderArgs=drawSide({c1:[bx+bw,by],c2:[bx+bw,by+bh+borders[2].width],c3:[bx,by+bh],c4:[bx,by+borders[0].width]},borderRadius[1],borderRadius[2],borderPoints.topRightOuter,borderPoints.topRightInner,borderPoints.bottomRightOuter,borderPoints.bottomRightInner);break;case 2:by=(by+height)-(borders[2].width);bh=borders[2].width;borderArgs=drawSide({c1:[bx+bw,by+bh],c2:[bx,by+bh],c3:[bx+borders[3].width,by],c4:[bx+bw-borders[3].width,by]},borderRadius[2],borderRadius[3],borderPoints.bottomRightOuter,borderPoints.bottomRightInner,borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner);break;case 3:bw=borders[3].width;borderArgs=drawSide({c1:[bx,by+bh+borders[2].width],c2:[bx,by],c3:[bx+bw,by+borders[0].width],c4:[bx+bw,by+bh]},borderRadius[3],borderRadius[0],borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner,borderPoints.topLeftOuter,borderPoints.topLeftInner);break;}borderData.borders.push({args:borderArgs,color:borders[borderSide].color});}return borderData;}function createShape(ctx,args){var shape=ctx.drawShape();args.forEach(function(border,index){shape[(index===0)?"moveTo":border[0]+"To"].apply(null,border.slice(1));});return shape;}function renderBorders(ctx,borderArgs,color){if(color!=="transparent"){ctx.setVariable("fillStyle",color);createShape(ctx,borderArgs);ctx.fill();numDraws+=1;}}function renderFormValue(el,bounds,stack){var valueWrap=doc.createElement('valuewrap'),cssPropertyArray=['lineHeight','textAlign','fontFamily','color','fontSize','paddingLeft','paddingTop','width','height','border','borderLeftWidth','borderTopWidth'],textValue,textNode;cssPropertyArray.forEach(function(property){try{valueWrap.style[property]=getCSS(el,property);}catch(e){Util.log("html2canvas: Parse: Exception caught in renderFormValue: "+e.message);}});valueWrap.style.borderColor="black";valueWrap.style.borderStyle="solid";valueWrap.style.display="block";valueWrap.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(el.type)||el.nodeName==="SELECT")valueWrap.style.lineHeight=getCSS(el,"height");valueWrap.style.top=bounds.top+"px";valueWrap.style.left=bounds.left+"px";textValue=(el.nodeName==="SELECT")?(el.options[el.selectedIndex]||0).text:el.value;if(!textValue)textValue=el.placeholder;textNode=doc.createTextNode(textValue);valueWrap.appendChild(textNode);body.appendChild(valueWrap);renderText(el,textNode,stack);body.removeChild(valueWrap);}function drawImage(ctx){ctx.drawImage.apply(ctx,Array.prototype.slice.call(arguments,1));numDraws+=1;}function getPseudoElement(el,which){var elStyle=window.getComputedStyle(el,which);var parentStyle=window.getComputedStyle(el);if(!elStyle||!elStyle.content||elStyle.content==="none"||elStyle.content==="-moz-alt-content"||elStyle.display==="none"||parentStyle.content===elStyle.content)return;var content=elStyle.content+'';if(content[0]==="'"||content[0]==="\"")content=content.replace(/(^['"])|(['"]$)/g,'');var isImage=content.substr(0,3)==='url',elps=document.createElement(isImage?'img':'span');elps.className=pseudoHide+"-element ";Object.keys(elStyle).filter(indexedProperty).forEach(function(prop){try{elps.style[prop]=elStyle[prop];}catch(e){Util.log(['Tried to assign readonly property ',prop,'Error:',e]);}});if(isImage)elps.src=Util.parseBackgroundImage(content)[0].args[0];else elps.innerHTML=content;return elps;}function indexedProperty(property){return(isNaN(window.parseInt(property,10)));}function renderBackgroundRepeat(ctx,image,backgroundPosition,bounds){var offsetX=Math.round(bounds.left+backgroundPosition.left),offsetY=Math.round(bounds.top+backgroundPosition.top);ctx.createPattern(image);ctx.translate(offsetX,offsetY);ctx.fill();ctx.translate(-offsetX,-offsetY);}function backgroundRepeatShape(ctx,image,backgroundPosition,bounds,left,top,width,height){var args=[];args.push(["line",Math.round(left),Math.round(top)]);args.push(["line",Math.round(left+width),Math.round(top)]);args.push(["line",Math.round(left+width),Math.round(height+top)]);args.push(["line",Math.round(left),Math.round(height+top)]);createShape(ctx,args);ctx.save();ctx.clip();renderBackgroundRepeat(ctx,image,backgroundPosition,bounds);ctx.restore();}function renderBackgroundColor(ctx,backgroundBounds,bgcolor){renderRect(ctx,backgroundBounds.left,backgroundBounds.top,backgroundBounds.width,backgroundBounds.height,bgcolor);}function renderBackgroundRepeating(el,bounds,ctx,image,imageIndex){var backgroundSize=Util.BackgroundSize(el,bounds,image,imageIndex),backgroundPosition=Util.BackgroundPosition(el,bounds,image,imageIndex,backgroundSize),backgroundRepeat=Util.BackgroundRepeat(el,imageIndex);image=resizeImage(image,backgroundSize);switch(backgroundRepeat){case "repeat-x":case "repeat no-repeat":backgroundRepeatShape(ctx,image,backgroundPosition,bounds,bounds.left,bounds.top+backgroundPosition.top,99999,image.height);break;case "repeat-y":case "no-repeat repeat":backgroundRepeatShape(ctx,image,backgroundPosition,bounds,bounds.left+backgroundPosition.left,bounds.top,image.width,99999);break;case "no-repeat":backgroundRepeatShape(ctx,image,backgroundPosition,bounds,bounds.left+backgroundPosition.left,bounds.top+backgroundPosition.top,image.width,image.height);break;default:renderBackgroundRepeat(ctx,image,backgroundPosition,{top:bounds.top,left:bounds.left,width:image.width,height:image.height});break;}}function renderBackgroundImage(element,bounds,ctx){var backgroundImage=getCSS(element,"backgroundImage"),backgroundImages=Util.parseBackgroundImage(backgroundImage),image,imageIndex=backgroundImages.length;while(imageIndex--){backgroundImage=backgroundImages[imageIndex];if(!backgroundImage.args||backgroundImage.args.length===0)continue;var key=backgroundImage.method==='url'?backgroundImage.args[0]:backgroundImage.value;image=loadImage(key);if(image)renderBackgroundRepeating(element,bounds,ctx,image,imageIndex);else Util.log("html2canvas: Error loading background:",backgroundImage);}}function resizeImage(image,bounds){if(image.width===bounds.width&&image.height===bounds.height)return image;var ctx,canvas=doc.createElement('canvas');canvas.width=bounds.width;canvas.height=bounds.height;ctx=canvas.getContext("2d");drawImage(ctx,image,0,0,image.width,image.height,0,0,bounds.width,bounds.height);return canvas;}function setOpacity(ctx,element,parentStack){return ctx.setVariable("globalAlpha",getCSS(element,"opacity")*(parentStack?parentStack.opacity:1));}function removePx(str){return str.replace("px","");}function getTransform(element,parentStack){var transformRegExp=/(matrix)\((.+)\)/;var transform=getCSS(element,"transform")||getCSS(element,"-webkit-transform")||getCSS(element,"-moz-transform")||getCSS(element,"-ms-transform")||getCSS(element,"-o-transform");var transformOrigin=getCSS(element,"transform-origin")||getCSS(element,"-webkit-transform-origin")||getCSS(element,"-moz-transform-origin")||getCSS(element,"-ms-transform-origin")||getCSS(element,"-o-transform-origin")||"0px 0px";transformOrigin=transformOrigin.split(" ").map(removePx).map(Util.asFloat);var matrix;if(transform&&transform!=="none"){var match=transform.match(transformRegExp);if(match)switch(match[1]){case "matrix":matrix=match[2].split(",").map(Util.trimText).map(Util.asFloat);break;}}return{origin:transformOrigin,matrix:matrix};}function createStack(element,parentStack,bounds,transform){var ctx=h2cRenderContext((!parentStack)?documentWidth():bounds.width,(!parentStack)?documentHeight():bounds.height),stack={ctx:ctx,opacity:setOpacity(ctx,element,parentStack),cssPosition:getCSS(element,"position"),borders:getBorderData(element),transform:transform,clip:(parentStack&&parentStack.clip)?Util.Extend({},parentStack.clip):null};setZ(element,stack,parentStack);if(options.useOverflow===true&&/(hidden|scroll|auto)/.test(getCSS(element,"overflow"))===true&&/(BODY)/i.test(element.nodeName)===false)stack.clip=(stack.clip)?clipBounds(stack.clip,bounds):bounds;return stack;}function getBackgroundBounds(borders,bounds,clip){var backgroundBounds={left:bounds.left+borders[3].width,top:bounds.top+borders[0].width,width:bounds.width-(borders[1].width+borders[3].width),height:bounds.height-(borders[0].width+borders[2].width)};if(clip)backgroundBounds=clipBounds(backgroundBounds,clip);return backgroundBounds;}function getBounds(element,transform){var bounds=(transform.matrix)?Util.OffsetBounds(element):Util.Bounds(element);transform.origin[0]+=bounds.left;transform.origin[1]+=bounds.top;return bounds;}function renderElement(element,parentStack,ignoreBackground){var transform=getTransform(element,parentStack),bounds=getBounds(element,transform),image,stack=createStack(element,parentStack,bounds,transform),borders=stack.borders,ctx=stack.ctx,backgroundBounds=getBackgroundBounds(borders,bounds,stack.clip),borderData=parseBorders(element,bounds,borders),backgroundColor=(ignoreElementsRegExp.test(element.nodeName))?"#efefef":getCSS(element,"backgroundColor");createShape(ctx,borderData.clip);ctx.save();ctx.clip();if(backgroundBounds.height>0&&backgroundBounds.width>0&&!ignoreBackground){renderBackgroundColor(ctx,bounds,backgroundColor);renderBackgroundImage(element,backgroundBounds,ctx);}else if(ignoreBackground)stack.backgroundColor=backgroundColor;ctx.restore();borderData.borders.forEach(function(border){renderBorders(ctx,border.args,border.color);});switch(element.nodeName){case "IMG":if((image=loadImage(element.getAttribute('src'))))renderImage(ctx,element,image,bounds,borders);else Util.log("html2canvas: Error loading <img>:"+element.getAttribute('src'));break;case "INPUT":if(/^(text|url|email|submit|button|reset)$/.test(element.type)&&(element.value||element.placeholder||"").length>0)renderFormValue(element,bounds,stack);break;case "TEXTAREA":if((element.value||element.placeholder||"").length>0)renderFormValue(element,bounds,stack);break;case "SELECT":if((element.options||element.placeholder||"").length>0)renderFormValue(element,bounds,stack);break;case "LI":renderListItem(element,stack,backgroundBounds);break;case "CANVAS":renderImage(ctx,element,element,bounds,borders);break;}return stack;}function isElementVisible(element){return(getCSS(element,'display')!=="none"&&getCSS(element,'visibility')!=="hidden"&&!element.hasAttribute("data-html2canvas-ignore"));}function parseElement(element,stack,cb){if(!cb)cb=function(){};if(isElementVisible(element)){stack=renderElement(element,stack,false)||stack;if(!ignoreElementsRegExp.test(element.nodeName))return parseChildren(element,stack,cb);}cb();}function parseChildren(element,stack,cb){var children=Util.Children(element);var jobs=children.length+1;finished();if(options.async)children.forEach(function(node){setTimeout(function(){parseNode(node);},0);});else children.forEach(parseNode);function parseNode(node){if(node.nodeType===node.ELEMENT_NODE)parseElement(node,stack,finished);else if(node.nodeType===node.TEXT_NODE){renderText(element,node,stack);finished();}else finished();}function finished(el){if(--jobs<=0){Util.log("finished rendering "+children.length+" children.");cb();}}}};_html2canvas.Preload=function(options){var images={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:false},pageOrigin,Util=_html2canvas.Util,methods,i,count=0,element=options.elements[0]||document.body,doc=element.ownerDocument,domImages=element.getElementsByTagName('img'),imgLen=domImages.length,link=doc.createElement("a"),supportCORS=(function(img){return(img.crossOrigin!==undefined);})(new Image()),timeoutTimer;link.href=window.location.href;pageOrigin=link.protocol+link.host;function isSameOrigin(url){link.href=url;link.href=link.href;var origin=link.protocol+link.host;return(origin===pageOrigin);}function start(){Util.log("html2canvas: start: images: "+images.numLoaded+" / "+images.numTotal+" (failed: "+images.numFailed+")");if(!images.firstRun&&images.numLoaded>=images.numTotal){Util.log("Finished loading images: # "+images.numTotal+" (failed: "+images.numFailed+")");if(typeof options.complete==="function")options.complete(images);}}function proxyGetImage(url,img,imageObj){var callback_name,scriptUrl=options.proxy,script;link.href=url;url=link.href;callback_name='html2canvas_'+(count++);imageObj.callbackname=callback_name;if(scriptUrl.indexOf("?")>-1)scriptUrl+="&";else scriptUrl+="?";scriptUrl+='url='+encodeURIComponent(url)+'&callback='+callback_name;script=doc.createElement("script");window[callback_name]=function(a){if(a.substring(0,6)==="error:"){imageObj.succeeded=false;images.numLoaded++;images.numFailed++;start();}else{setImageLoadHandlers(img,imageObj);img.src=a;}window[callback_name]=undefined;try{delete window[callback_name];}catch(ex){}script.parentNode.removeChild(script);script=null;delete imageObj.script;delete imageObj.callbackname;};script.setAttribute("type","text/javascript");script.setAttribute("src",scriptUrl);imageObj.script=script;window.document.body.appendChild(script);}function loadPseudoElement(element,type){var style=window.getComputedStyle(element,type),content=style.content;if(content.substr(0,3)==='url')methods.loadImage(_html2canvas.Util.parseBackgroundImage(content)[0].args[0]);loadBackgroundImages(style.backgroundImage,element);}function loadPseudoElementImages(element){loadPseudoElement(element,":before");loadPseudoElement(element,":after");}function loadGradientImage(backgroundImage,bounds){var img=_html2canvas.Generate.Gradient(backgroundImage,bounds);if(img!==undefined){images[backgroundImage]={img:img,succeeded:true};images.numTotal++;images.numLoaded++;start();}}function invalidBackgrounds(background_image){return(background_image&&background_image.method&&background_image.args&&background_image.args.length>0);}function loadBackgroundImages(background_image,el){var bounds;_html2canvas.Util.parseBackgroundImage(background_image).filter(invalidBackgrounds).forEach(function(background_image){if(background_image.method==='url')methods.loadImage(background_image.args[0]);else if(background_image.method.match(/\-?gradient$/)){if(bounds===undefined)bounds=_html2canvas.Util.Bounds(el);loadGradientImage(background_image.value,bounds);}});}function getImages(el){var elNodeType=false;try{Util.Children(el).forEach(getImages);}catch(e){}try{elNodeType=el.nodeType;}catch(ex){elNodeType=false;Util.log("html2canvas: failed to access some element's nodeType - Exception: "+ex.message);}if(elNodeType===1||elNodeType===undefined){loadPseudoElementImages(el);try{loadBackgroundImages(Util.getCSS(el,'backgroundImage'),el);}catch(e){Util.log("html2canvas: failed to get background-image - Exception: "+e.message);}loadBackgroundImages(el);}}function setImageLoadHandlers(img,imageObj){img.onload=function(){if(imageObj.timer!==undefined)window.clearTimeout(imageObj.timer);images.numLoaded++;imageObj.succeeded=true;img.onerror=img.onload=null;start();};img.onerror=function(){if(img.crossOrigin==="anonymous"){window.clearTimeout(imageObj.timer);if(options.proxy){var src=img.src;img=new Image();imageObj.img=img;img.src=src;proxyGetImage(img.src,img,imageObj);return;}}images.numLoaded++;images.numFailed++;imageObj.succeeded=false;img.onerror=img.onload=null;start();};}methods={loadImage:function(src){var img,imageObj;if(src&&images[src]===undefined){img=new Image();if(src.match(/data:image\/.*;base64,/i)){img.src=src.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,'');imageObj=images[src]={img:img};images.numTotal++;setImageLoadHandlers(img,imageObj);}else if(isSameOrigin(src)||options.allowTaint===true){imageObj=images[src]={img:img};images.numTotal++;setImageLoadHandlers(img,imageObj);img.src=src;}else if(supportCORS&&!options.allowTaint&&options.useCORS){img.crossOrigin="anonymous";imageObj=images[src]={img:img};images.numTotal++;setImageLoadHandlers(img,imageObj);img.src=src;}else if(options.proxy){imageObj=images[src]={img:img};images.numTotal++;proxyGetImage(src,img,imageObj);}}},cleanupDOM:function(cause){var img,src;if(!images.cleanupDone){if(cause&&typeof cause==="string")Util.log("html2canvas: Cleanup because: "+cause);else Util.log("html2canvas: Cleanup after timeout: "+options.timeout+" ms.");for(src in images)if(images.hasOwnProperty(src)){img=images[src];if(typeof img==="object"&&img.callbackname&&img.succeeded===undefined){window[img.callbackname]=undefined;try{delete window[img.callbackname];}catch(ex){}if(img.script&&img.script.parentNode){img.script.setAttribute("src","about:blank");img.script.parentNode.removeChild(img.script);}images.numLoaded++;images.numFailed++;Util.log("html2canvas: Cleaned up failed img: '"+src+"' Steps: "+images.numLoaded+" / "+images.numTotal);}}if(window.stop!==undefined)window.stop();else if(document.execCommand!==undefined)document.execCommand("Stop",false);if(document.close!==undefined)document.close();images.cleanupDone=true;if(!(cause&&typeof cause==="string"))start();}},renderingDone:function(){if(timeoutTimer)window.clearTimeout(timeoutTimer);}};if(options.timeout>0)timeoutTimer=window.setTimeout(methods.cleanupDOM,options.timeout);Util.log('html2canvas: Preload starts: finding background-images');images.firstRun=true;getImages(element);Util.log('html2canvas: Preload: Finding images');for(i=0;i<imgLen;i+=1)methods.loadImage(domImages[i].getAttribute("src"));images.firstRun=false;Util.log('html2canvas: Preload: Done.');if(images.numTotal===images.numLoaded)start();return methods;};_html2canvas.Renderer=function(parseQueue,options){function sortZindex(a,b){if(a==='children')return -1;else if(b==='children')return 1;else return a-b;}function createRenderQueue(parseQueue){var queue=[],rootContext;rootContext=(function buildStackingContext(rootNode){var rootContext={};function insert(context,node,specialParent){var zi=(node.zIndex.zindex==='auto')?0:Number(node.zIndex.zindex),contextForChildren=context,isPositioned=node.zIndex.isPositioned,isFloated=node.zIndex.isFloated,stub={node:node},childrenDest=specialParent;if(node.zIndex.ownStacking){contextForChildren=stub.context={children:[{node:node,children:[]}]};childrenDest=undefined;}else if(isPositioned||isFloated)childrenDest=stub.children=[];if(zi===0&&specialParent)specialParent.push(stub);else{if(!context[zi])context[zi]=[];context[zi].push(stub);}node.zIndex.children.forEach(function(childNode){insert(contextForChildren,childNode,childrenDest);});}insert(rootContext,rootNode);return rootContext;})(parseQueue);function sortZ(context){Object.keys(context).sort(sortZindex).forEach(function(zi){var nonPositioned=[],floated=[],positioned=[],list=[];context[zi].forEach(function(v){if(v.node.zIndex.isPositioned||v.node.zIndex.opacity<1)positioned.push(v);else if(v.node.zIndex.isFloated)floated.push(v);else nonPositioned.push(v);});(function walk(arr){arr.forEach(function(v){list.push(v);if(v.children)walk(v.children);});})(nonPositioned.concat(floated,positioned));list.forEach(function(v){if(v.context)sortZ(v.context);else queue.push(v.node);});});}sortZ(rootContext);return queue;}function getRenderer(rendererName){var renderer;if(typeof options.renderer==="string"&&_html2canvas.Renderer[rendererName]!==undefined)renderer=_html2canvas.Renderer[rendererName](options);else if(typeof rendererName==="function")renderer=rendererName(options);else throw new Error("Unknown renderer");if(typeof renderer!=="function")throw new Error("Invalid renderer defined");return renderer;}return getRenderer(options.renderer)(parseQueue,options,document,createRenderQueue(parseQueue.stack),_html2canvas);};_html2canvas.Util.Support=function(options,doc){function supportSVGRendering(){var img=new Image(),canvas=doc.createElement("canvas"),ctx=(canvas.getContext===undefined)?false:canvas.getContext("2d");if(ctx===false)return false;canvas.width=canvas.height=10;img.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{ctx.drawImage(img,0,0);canvas.toDataURL();}catch(e){return false;}_html2canvas.Util.log('html2canvas: Parse: SVG powered rendering available');return true;}function supportRangeBounds(){var r,testElement,rangeBounds,rangeHeight,support=false;if(doc.createRange){r=doc.createRange();if(r.getBoundingClientRect){testElement=doc.createElement('boundtest');testElement.style.height="123px";testElement.style.display="block";doc.body.appendChild(testElement);r.selectNode(testElement);rangeBounds=r.getBoundingClientRect();rangeHeight=rangeBounds.height;if(rangeHeight===123)support=true;doc.body.removeChild(testElement);}}return support;}return{rangeBounds:supportRangeBounds(),svgRendering:options.svgRendering&&supportSVGRendering()};};window.html2canvas=function(elements,opts){elements=(elements.length)?elements:[elements];var queue,canvas,options={logging:false,elements:elements,background:"#fff",proxy:null,timeout:0,useCORS:false,allowTaint:false,svgRendering:false,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:true,letterRendering:false,chinese:false,async:false,width:null,height:null,taintTest:true,renderer:"Canvas"};options=_html2canvas.Util.Extend(opts,options);_html2canvas.logging=options.logging;options.complete=function(images){if(typeof options.onpreloaded==="function")if(options.onpreloaded(images)===false)return;_html2canvas.Parse(images,options,function(queue){if(typeof options.onparsed==="function")if(options.onparsed(queue)===false)return;canvas=_html2canvas.Renderer(queue,options);if(typeof options.onrendered==="function")options.onrendered(canvas);});};window.setTimeout(function(){_html2canvas.Preload(options);},0);return{render:function(queue,opts){return _html2canvas.Renderer(queue,_html2canvas.Util.Extend(opts,options));},parse:function(images,opts){return _html2canvas.Parse(images,_html2canvas.Util.Extend(opts,options));},preload:function(opts){return _html2canvas.Preload(_html2canvas.Util.Extend(opts,options));},log:_html2canvas.Util.log};};window.html2canvas.log=_html2canvas.Util.log;window.html2canvas.Renderer={Canvas:undefined};_html2canvas.Renderer.Canvas=function(options){options=options||{};var doc=document,safeImages=[],testCanvas=document.createElement("canvas"),testctx=testCanvas.getContext("2d"),Util=_html2canvas.Util,canvas=options.canvas||doc.createElement('canvas');function createShape(ctx,args){ctx.beginPath();args.forEach(function(arg){ctx[arg.name].apply(ctx,arg.arguments);});ctx.closePath();}function safeImage(item){if(safeImages.indexOf(item.arguments[0].src)===-1){testctx.drawImage(item.arguments[0],0,0);try{testctx.getImageData(0,0,1,1);}catch(e){testCanvas=doc.createElement("canvas");testctx=testCanvas.getContext("2d");return false;}safeImages.push(item.arguments[0].src);}return true;}function renderItem(ctx,item){switch(item.type){case "variable":ctx[item.name]=item.arguments;break;case "function":switch(item.name){case "createPattern":if(item.arguments[0].width>0&&item.arguments[0].height>0)try{ctx.fillStyle=ctx.createPattern(item.arguments[0],"repeat");}catch(e){Util.log("html2canvas: Renderer: Error creating pattern",e.message);}break;case "drawShape":createShape(ctx,item.arguments);break;case "drawImage":if(item.arguments[8]>0&&item.arguments[7]>0)if(!options.taintTest||(options.taintTest&&safeImage(item)))ctx.drawImage.apply(ctx,item.arguments);break;default:ctx[item.name].apply(ctx,item.arguments);}break;}}return function(parsedData,options,document,queue,_html2canvas){var ctx=canvas.getContext("2d"),newCanvas,bounds,fstyle,zStack=parsedData.stack;canvas.width=canvas.style.width=options.width||zStack.ctx.width;canvas.height=canvas.style.height=options.height||zStack.ctx.height;fstyle=ctx.fillStyle;ctx.fillStyle=(Util.isTransparent(parsedData.backgroundColor)&&options.background!==undefined)?options.background:parsedData.backgroundColor;ctx.fillRect(0,0,canvas.width,canvas.height);ctx.fillStyle=fstyle;queue.forEach(function(storageContext){ctx.textBaseline="bottom";ctx.save();if(storageContext.transform.matrix){ctx.translate(storageContext.transform.origin[0],storageContext.transform.origin[1]);ctx.transform.apply(ctx,storageContext.transform.matrix);ctx.translate(-storageContext.transform.origin[0],-storageContext.transform.origin[1]);}if(storageContext.clip){ctx.beginPath();ctx.rect(storageContext.clip.left,storageContext.clip.top,storageContext.clip.width,storageContext.clip.height);ctx.clip();}if(storageContext.ctx.storage)storageContext.ctx.storage.forEach(function(item){renderItem(ctx,item);});ctx.restore();});Util.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");if(options.elements.length===1)if(typeof options.elements[0]==="object"&&options.elements[0].nodeName!=="BODY"){bounds=_html2canvas.Util.Bounds(options.elements[0]);newCanvas=document.createElement('canvas');newCanvas.width=Math.ceil(bounds.width);newCanvas.height=Math.ceil(bounds.height);ctx=newCanvas.getContext("2d");ctx.drawImage(canvas,bounds.left,bounds.top,bounds.width,bounds.height,0,0,bounds.width,bounds.height);canvas=null;return newCanvas;}return canvas;};};})(window,document);
function MediumEditor(elements,options){'use strict';return this.init(elements,options);}if(typeof module==='object')module.exports=MediumEditor;(function(window,document){'use strict';function extend(b,a){var prop;if(b===undefined)return a;for(prop in a)if(a.hasOwnProperty(prop)&&b.hasOwnProperty(prop)===false)b[prop]=a[prop];return b;}function saveSelection(){var i,len,ranges,sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){ranges=[];for(i=0,len=sel.rangeCount;i<len;i+=1)ranges.push(sel.getRangeAt(i));return ranges;}return null;}function restoreSelection(savedSel){var i,len,sel=window.getSelection();if(savedSel){sel.removeAllRanges();for(i=0,len=savedSel.length;i<len;i+=1)sel.addRange(savedSel[i]);}}function getSelectionStart(){var node=document.getSelection().anchorNode,startNode=(node&&node.nodeType===3?node.parentNode:node);return startNode;}function getSelectionHtml(){var i,html='',sel,len,container;if(window.getSelection!==undefined){sel=window.getSelection();if(sel.rangeCount){container=document.createElement('div');for(i=0,len=sel.rangeCount;i<len;i+=1)container.appendChild(sel.getRangeAt(i).cloneContents());html=container.innerHTML;}}else if(document.selection!==undefined)if(document.selection.type==='Text')html=document.selection.createRange().htmlText;return html;}function isElement(obj){return !!(obj&&obj.nodeType===1);}MediumEditor.prototype={defaults:{allowMultiParagraphSelection:true,anchorInputPlaceholder:'Paste or type a link',anchorPreviewHideDelay:500,buttons:['bold','italic','underline','anchor','header1','header2','quote'],buttonLabels:false,checkLinkFormat:false,cleanPastedHTML:false,delay:0,diffLeft:0,diffTop:-10,disableReturn:false,disableDoubleReturn:false,disableToolbar:false,firstHeader:'h3',forcePlainText:true,placeholder:'Type your text',secondHeader:'h4',targetBlank:false,extensions:{}},isIE:((navigator.appName==='Microsoft Internet Explorer')||((navigator.appName==='Netscape')&&(new RegExp('Trident/.*rv:([0-9]{1,}[.0-9]{0,})').exec(navigator.userAgent)!==null))),init:function(elements,options){this.setElementSelection(elements);if(this.elements.length===0)return;this.parentElements=['p','h1','h2','h3','h4','h5','h6','blockquote','pre'];this.id=document.querySelectorAll('.medium-editor-toolbar').length+1;this.options=extend(options,this.defaults);return this.setup();},setup:function(){this.isActive=true;this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions();},initElements:function(){this.updateElementList();var i,addToolbar=false;for(i=0;i<this.elements.length;i+=1){this.elements[i].setAttribute('contentEditable',true);if(!this.elements[i].getAttribute('data-placeholder'))this.elements[i].setAttribute('data-placeholder',this.options.placeholder);this.elements[i].setAttribute('data-medium-element',true);this.bindParagraphCreation(i).bindReturn(i).bindTab(i);if(!this.options.disableToolbar&&!this.elements[i].getAttribute('data-disable-toolbar'))addToolbar=true;}if(addToolbar)this.initToolbar().bindButtons().bindAnchorForm().bindAnchorPreview();return this;},setElementSelection:function(selector){this.elementSelection=selector;this.updateElementList();},updateElementList:function(){this.elements=typeof this.elementSelection==='string'?document.querySelectorAll(this.elementSelection):this.elementSelection;if(this.elements.nodeType===1)this.elements=[this.elements];},serialize:function(){var i,elementid,content={};for(i=0;i<this.elements.length;i+=1){elementid=(this.elements[i].id!=='')?this.elements[i].id:'element-'+i;content[elementid]={value:this.elements[i].innerHTML.trim()};}return content;},callExtensions:function(funcName){if(arguments.length<1)return;var args=Array.prototype.slice.call(arguments,1),ext,name;for(name in this.options.extensions)if(this.options.extensions.hasOwnProperty(name)){ext=this.options.extensions[name];if(ext[funcName]!==undefined)ext[funcName].apply(ext,args);}},bindParagraphCreation:function(index){var self=this;this.elements[index].addEventListener('keyup',function(e){var node=getSelectionStart(),tagName;if(node&&node.getAttribute('data-medium-element')&&node.children.length===0&&!(self.options.disableReturn||node.getAttribute('data-disable-return')))document.execCommand('formatBlock',false,'p');if(e.which===13){node=getSelectionStart();tagName=node.tagName.toLowerCase();if(!(self.options.disableReturn||this.getAttribute('data-disable-return'))&&tagName!=='li'&&!self.isListItemChild(node)){if(!e.shiftKey)document.execCommand('formatBlock',false,'p');if(tagName==='a')document.execCommand('unlink',false,null);}}});return this;},isListItemChild:function(node){var parentNode=node.parentNode,tagName=parentNode.tagName.toLowerCase();while(this.parentElements.indexOf(tagName)===-1&&tagName!=='div'){if(tagName==='li')return true;parentNode=parentNode.parentNode;if(parentNode&&parentNode.tagName)tagName=parentNode.tagName.toLowerCase();else return false;}return false;},bindReturn:function(index){var self=this;this.elements[index].addEventListener('keypress',function(e){if(e.which===13)if(self.options.disableReturn||this.getAttribute('data-disable-return'))e.preventDefault();else if(self.options.disableDoubleReturn||this.getAttribute('data-disable-double-return')){var node=getSelectionStart();if(node&&node.innerText==='\n')e.preventDefault();}});return this;},bindTab:function(index){this.elements[index].addEventListener('keydown',function(e){if(e.which===9){var tag=getSelectionStart().tagName.toLowerCase();if(tag==='pre'){e.preventDefault();document.execCommand('insertHtml',null,'    ');}}});return this;},buttonTemplate:function(btnType){var buttonLabels=this.getButtonLabels(this.options.buttonLabels),buttonTemplates={'bold':'<button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+buttonLabels.bold+'</button>','italic':'<button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+buttonLabels.italic+'</button>','underline':'<button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+buttonLabels.underline+'</button>','strikethrough':'<button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike"><strike>A</strike></button>','superscript':'<button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+buttonLabels.superscript+'</button>','subscript':'<button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+buttonLabels.subscript+'</button>','anchor':'<button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+buttonLabels.anchor+'</button>','image':'<button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img">'+buttonLabels.image+'</button>','header1':'<button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+buttonLabels.header1+'</button>','header2':'<button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+buttonLabels.header2+'</button>','quote':'<button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+buttonLabels.quote+'</button>','orderedlist':'<button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+buttonLabels.orderedlist+'</button>','unorderedlist':'<button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+buttonLabels.unorderedlist+'</button>','pre':'<button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+buttonLabels.pre+'</button>','indent':'<button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul">'+buttonLabels.indent+'</button>','outdent':'<button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul">'+buttonLabels.outdent+'</button>'};return buttonTemplates[btnType]||false;},getButtonLabels:function(buttonLabelType){var customButtonLabels,attrname,buttonLabels={'bold':'<b>B</b>','italic':'<b><i>I</i></b>','underline':'<b><u>U</u></b>','superscript':'<b>x<sup>1</sup></b>','subscript':'<b>x<sub>1</sub></b>','anchor':'<b>#</b>','image':'<b>image</b>','header1':'<b>H1</b>','header2':'<b>H2</b>','quote':'<b>&ldquo;</b>','orderedlist':'<b>1.</b>','unorderedlist':'<b>&bull;</b>','pre':'<b>0101</b>','indent':'<b>&rarr;</b>','outdent':'<b>&larr;</b>'};if(buttonLabelType==='fontawesome')customButtonLabels={'bold':'<i class="fa fa-bold"></i>','italic':'<i class="fa fa-italic"></i>','underline':'<i class="fa fa-underline"></i>','superscript':'<i class="fa fa-superscript"></i>','subscript':'<i class="fa fa-subscript"></i>','anchor':'<i class="fa fa-link"></i>','image':'<i class="fa fa-picture-o"></i>','quote':'<i class="fa fa-quote-right"></i>','orderedlist':'<i class="fa fa-list-ol"></i>','unorderedlist':'<i class="fa fa-list-ul"></i>','pre':'<i class="fa fa-code fa-lg"></i>','indent':'<i class="fa fa-indent"></i>','outdent':'<i class="fa fa-outdent"></i>'};else if(typeof buttonLabelType==='object')customButtonLabels=buttonLabelType;if(typeof customButtonLabels==='object')for(attrname in customButtonLabels)if(customButtonLabels.hasOwnProperty(attrname))buttonLabels[attrname]=customButtonLabels[attrname];return buttonLabels;},initToolbar:function(){if(this.toolbar)return this;this.toolbar=this.createToolbar();this.keepToolbarAlive=false;this.anchorForm=this.toolbar.querySelector('.medium-editor-toolbar-form-anchor');this.anchorInput=this.anchorForm.querySelector('input');this.toolbarActions=this.toolbar.querySelector('.medium-editor-toolbar-actions');this.anchorPreview=this.createAnchorPreview();return this;},createToolbar:function(){var toolbar=document.createElement('div');toolbar.id='medium-editor-toolbar-'+this.id;toolbar.className='medium-editor-toolbar';toolbar.appendChild(this.toolbarButtons());toolbar.appendChild(this.toolbarFormAnchor());document.body.appendChild(toolbar);return toolbar;},toolbarButtons:function(){var btns=this.options.buttons,ul=document.createElement('ul'),li,i,btn,ext;ul.id='medium-editor-toolbar-actions';ul.className='medium-editor-toolbar-actions clearfix';for(i=0;i<btns.length;i+=1){if(this.options.extensions.hasOwnProperty(btns[i])){ext=this.options.extensions[btns[i]];btn=ext.getButton!==undefined?ext.getButton():null;}else btn=this.buttonTemplate(btns[i]);if(btn){li=document.createElement('li');if(isElement(btn))li.appendChild(btn);else li.innerHTML=btn;ul.appendChild(li);}}return ul;},toolbarFormAnchor:function(){var anchor=document.createElement('div'),input=document.createElement('input'),a=document.createElement('a');a.setAttribute('href','#');a.innerHTML='&times;';input.setAttribute('type','text');input.setAttribute('placeholder',this.options.anchorInputPlaceholder);anchor.className='medium-editor-toolbar-form-anchor';anchor.id='medium-editor-toolbar-form-anchor';anchor.appendChild(input);anchor.appendChild(a);return anchor;},bindSelect:function(){var self=this,timer='',i;this.checkSelectionWrapper=function(e){if(e&&self.clickingIntoArchorForm(e))return false;clearTimeout(timer);timer=setTimeout(function(){self.checkSelection();},self.options.delay);};document.documentElement.addEventListener('mouseup',this.checkSelectionWrapper);for(i=0;i<this.elements.length;i+=1){this.elements[i].addEventListener('keyup',this.checkSelectionWrapper);this.elements[i].addEventListener('blur',this.checkSelectionWrapper);}return this;},checkSelection:function(){var newSelection,selectionElement;if(this.keepToolbarAlive!==true&&!this.options.disableToolbar){newSelection=window.getSelection();if(newSelection.toString().trim()===''||(this.options.allowMultiParagraphSelection===false&&this.hasMultiParagraphs()))this.hideToolbarActions();else{selectionElement=this.getSelectionElement();if(!selectionElement||selectionElement.getAttribute('data-disable-toolbar'))this.hideToolbarActions();else this.checkSelectionElement(newSelection,selectionElement);}}return this;},clickingIntoArchorForm:function(e){var self=this;if(e.type&&e.type.toLowerCase()==='blur'&&e.relatedTarget&&e.relatedTarget===self.anchorInput)return true;return false;},hasMultiParagraphs:function(){var selectionHtml=getSelectionHtml().replace(/<[\S]+><\/[\S]+>/gim,''),hasMultiParagraphs=selectionHtml.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return(hasMultiParagraphs?hasMultiParagraphs.length:0);},checkSelectionElement:function(newSelection,selectionElement){var i;this.selection=newSelection;this.selectionRange=this.selection.getRangeAt(0);for(i=0;i<this.elements.length;i+=1)if(this.elements[i]===selectionElement){this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();return;}this.hideToolbarActions();},getSelectionElement:function(){var selection=window.getSelection(),range,current,parent,result,getMediumElement=function(e){var localParent=e;try{while(!localParent.getAttribute('data-medium-element'))localParent=localParent.parentNode;}catch(errb){return false;}return localParent;};try{range=selection.getRangeAt(0);current=range.commonAncestorContainer;parent=current.parentNode;if(current.getAttribute('data-medium-element'))result=current;else result=getMediumElement(parent);}catch(err){result=getMediumElement(parent);}return result;},setToolbarPosition:function(){var buttonHeight=50,selection=window.getSelection(),range=selection.getRangeAt(0),boundary=range.getBoundingClientRect(),defaultLeft=(this.options.diffLeft)-(this.toolbar.offsetWidth/2),middleBoundary=(boundary.left+boundary.right)/2,halfOffsetWidth=this.toolbar.offsetWidth/2;if(boundary.top<buttonHeight){this.toolbar.classList.add('medium-toolbar-arrow-over');this.toolbar.classList.remove('medium-toolbar-arrow-under');this.toolbar.style.top=buttonHeight+boundary.bottom-this.options.diffTop+window.pageYOffset-this.toolbar.offsetHeight+'px';}else{this.toolbar.classList.add('medium-toolbar-arrow-under');this.toolbar.classList.remove('medium-toolbar-arrow-over');this.toolbar.style.top=boundary.top+this.options.diffTop+window.pageYOffset-this.toolbar.offsetHeight+'px';}if(middleBoundary<halfOffsetWidth)this.toolbar.style.left=defaultLeft+halfOffsetWidth+'px';else if((window.innerWidth-middleBoundary)<halfOffsetWidth)this.toolbar.style.left=window.innerWidth+defaultLeft-halfOffsetWidth+'px';else this.toolbar.style.left=defaultLeft+middleBoundary+'px';this.hideAnchorPreview();return this;},setToolbarButtonStates:function(){var buttons=this.toolbarActions.querySelectorAll('button'),i;for(i=0;i<buttons.length;i+=1)buttons[i].classList.remove('medium-editor-button-active');this.checkActiveButtons();return this;},checkActiveButtons:function(){var elements=Array.prototype.slice.call(this.elements),parentNode=this.selection.anchorNode;if(!parentNode.tagName)parentNode=this.selection.anchorNode.parentNode;while(parentNode.tagName!==undefined&&this.parentElements.indexOf(parentNode.tagName.toLowerCase)===-1){this.activateButton(parentNode.tagName.toLowerCase());this.callExtensions('checkState',parentNode);if(elements.indexOf(parentNode)!==-1)break;parentNode=parentNode.parentNode;}},activateButton:function(tag){var el=this.toolbar.querySelector('[data-element="'+tag+'"]');if(el!==null&&el.className.indexOf('medium-editor-button-active')===-1)el.className+=' medium-editor-button-active';},bindButtons:function(){var buttons=this.toolbar.querySelectorAll('button'),i,self=this,triggerAction=function(e){e.preventDefault();e.stopPropagation();if(self.selection===undefined)self.checkSelection();if(this.className.indexOf('medium-editor-button-active')>-1)this.classList.remove('medium-editor-button-active');else this.className+=' medium-editor-button-active';if(this.hasAttribute('data-action'))self.execAction(this.getAttribute('data-action'),e);};for(i=0;i<buttons.length;i+=1)buttons[i].addEventListener('click',triggerAction);this.setFirstAndLastItems(buttons);return this;},setFirstAndLastItems:function(buttons){if(buttons.length>0){buttons[0].className+=' medium-editor-button-first';buttons[buttons.length-1].className+=' medium-editor-button-last';}return this;},execAction:function(action,e){if(action.indexOf('append-')>-1){this.execFormatBlock(action.replace('append-',''));this.setToolbarPosition();this.setToolbarButtonStates();}else if(action==='anchor')this.triggerAnchorAction(e);else if(action==='image')document.execCommand('insertImage',false,window.getSelection());else{document.execCommand(action,false,null);this.setToolbarPosition();}},triggerAnchorAction:function(){if(this.selection.anchorNode.parentNode.tagName.toLowerCase()==='a')document.execCommand('unlink',false,null);else if(this.anchorForm.style.display==='block')this.showToolbarActions();else this.showAnchorForm();return this;},execFormatBlock:function(el){var selectionData=this.getSelectionData(this.selection.anchorNode);if(el==='blockquote'&&selectionData.el&&selectionData.el.parentNode.tagName.toLowerCase()==='blockquote')return document.execCommand('outdent',false,null);if(selectionData.tagName===el)el='p';if(this.isIE){if(el==='blockquote')return document.execCommand('indent',false,el);el='<'+el+'>';}return document.execCommand('formatBlock',false,el);},getSelectionData:function(el){var tagName;if(el&&el.tagName)tagName=el.tagName.toLowerCase();while(el&&this.parentElements.indexOf(tagName)===-1){el=el.parentNode;if(el&&el.tagName)tagName=el.tagName.toLowerCase();}return{el:el,tagName:tagName};},getFirstChild:function(el){var firstChild=el.firstChild;while(firstChild!==null&&firstChild.nodeType!==1)firstChild=firstChild.nextSibling;return firstChild;},hideToolbarActions:function(){this.keepToolbarAlive=false;if(this.toolbar!==undefined)this.toolbar.classList.remove('medium-editor-toolbar-active');},showToolbarActions:function(){var self=this,timer;this.anchorForm.style.display='none';this.toolbarActions.style.display='block';this.keepToolbarAlive=false;clearTimeout(timer);timer=setTimeout(function(){if(self.toolbar&&!self.toolbar.classList.contains('medium-editor-toolbar-active'))self.toolbar.classList.add('medium-editor-toolbar-active');},100);},showAnchorForm:function(link_value){this.toolbarActions.style.display='none';this.savedSelection=saveSelection();this.anchorForm.style.display='block';this.keepToolbarAlive=true;this.anchorInput.focus();this.anchorInput.value=link_value||'';},bindAnchorForm:function(){var linkCancel=this.anchorForm.querySelector('a'),self=this;this.anchorForm.addEventListener('click',function(e){e.stopPropagation();});this.anchorInput.addEventListener('keyup',function(e){if(e.keyCode===13){e.preventDefault();self.createLink(this);}});this.anchorInput.addEventListener('click',function(e){e.stopPropagation();self.keepToolbarAlive=true;});this.anchorInput.addEventListener('blur',function(){self.keepToolbarAlive=false;self.checkSelection();});linkCancel.addEventListener('click',function(e){e.preventDefault();self.showToolbarActions();restoreSelection(self.savedSelection);});return this;},hideAnchorPreview:function(){this.anchorPreview.classList.remove('medium-editor-anchor-preview-active');},showAnchorPreview:function(anchorEl){if(this.anchorPreview.classList.contains('medium-editor-anchor-preview-active'))return true;var self=this,buttonHeight=40,boundary=anchorEl.getBoundingClientRect(),middleBoundary=(boundary.left+boundary.right)/2,halfOffsetWidth,defaultLeft,timer;self.anchorPreview.querySelector('i').textContent=anchorEl.href;halfOffsetWidth=self.anchorPreview.offsetWidth/2;defaultLeft=self.options.diffLeft-halfOffsetWidth;clearTimeout(timer);timer=setTimeout(function(){if(self.anchorPreview&&!self.anchorPreview.classList.contains('medium-editor-anchor-preview-active'))self.anchorPreview.classList.add('medium-editor-anchor-preview-active');},100);self.observeAnchorPreview(anchorEl);self.anchorPreview.classList.add('medium-toolbar-arrow-over');self.anchorPreview.classList.remove('medium-toolbar-arrow-under');self.anchorPreview.style.top=Math.round(buttonHeight+boundary.bottom-self.options.diffTop+window.pageYOffset-self.anchorPreview.offsetHeight)+'px';if(middleBoundary<halfOffsetWidth)self.anchorPreview.style.left=defaultLeft+halfOffsetWidth+'px';else if((window.innerWidth-middleBoundary)<halfOffsetWidth)self.anchorPreview.style.left=window.innerWidth+defaultLeft-halfOffsetWidth+'px';else self.anchorPreview.style.left=defaultLeft+middleBoundary+'px';return this;},observeAnchorPreview:function(anchorEl){var self=this,lastOver=new Date().getTime(),over=true,stamp=function(){lastOver=new Date().getTime();over=true;},unstamp=function(e){if(!e.relatedTarget||!/anchor-preview/.test(e.relatedTarget.className))over=false;},interval_timer=setInterval(function(){if(over)return true;var durr=new Date().getTime()-lastOver;if(durr>self.options.anchorPreviewHideDelay){self.hideAnchorPreview();clearInterval(interval_timer);self.anchorPreview.removeEventListener('mouseover',stamp);self.anchorPreview.removeEventListener('mouseout',unstamp);anchorEl.removeEventListener('mouseover',stamp);anchorEl.removeEventListener('mouseout',unstamp);}},200);self.anchorPreview.addEventListener('mouseover',stamp);self.anchorPreview.addEventListener('mouseout',unstamp);anchorEl.addEventListener('mouseover',stamp);anchorEl.addEventListener('mouseout',unstamp);},createAnchorPreview:function(){var self=this,anchorPreview=document.createElement('div');anchorPreview.id='medium-editor-anchor-preview-'+this.id;anchorPreview.className='medium-editor-anchor-preview';anchorPreview.innerHTML=this.anchorPreviewTemplate();document.body.appendChild(anchorPreview);anchorPreview.addEventListener('click',function(){self.anchorPreviewClickHandler();});return anchorPreview;},anchorPreviewTemplate:function(){return '<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">'+'    <i class="medium-editor-toolbar-anchor-preview-inner"></i>'+'</div>';},anchorPreviewClickHandler:function(e){if(this.activeAnchor){var self=this,range=document.createRange(),sel=window.getSelection();range.selectNodeContents(self.activeAnchor);sel.removeAllRanges();sel.addRange(range);setTimeout(function(){if(self.activeAnchor)self.showAnchorForm(self.activeAnchor.href);self.keepToolbarAlive=false;},100+self.options.delay);}this.hideAnchorPreview();},editorAnchorObserver:function(e){var self=this,overAnchor=true,leaveAnchor=function(){overAnchor=false;self.activeAnchor.removeEventListener('mouseout',leaveAnchor);};if(e.target&&e.target.tagName.toLowerCase()==='a'){if(!/href=["']\S+["']/.test(e.target.outerHTML)||/href=["']#\S+["']/.test(e.target.outerHTML))return true;if(this.toolbar.classList.contains('medium-editor-toolbar-active'))return true;this.activeAnchor=e.target;this.activeAnchor.addEventListener('mouseout',leaveAnchor);setTimeout(function(){if(overAnchor)self.showAnchorPreview(e.target);},self.options.delay);}},bindAnchorPreview:function(index){var i,self=this;this.editorAnchorObserverWrapper=function(e){self.editorAnchorObserver(e);};for(i=0;i<this.elements.length;i+=1)this.elements[i].addEventListener('mouseover',this.editorAnchorObserverWrapper);return this;},checkLinkFormat:function(value){var re=/^https?:\/\//;if(value.match(re))return value;return "http://"+value;},setTargetBlank:function(){var el=getSelectionStart(),i;if(el.tagName.toLowerCase()==='a')el.target='_blank';else{el=el.getElementsByTagName('a');for(i=0;i<el.length;i+=1)el[i].target='_blank';}},createLink:function(input){restoreSelection(this.savedSelection);if(this.options.checkLinkFormat)input.value=this.checkLinkFormat(input.value);document.execCommand('createLink',false,input.value);if(this.options.targetBlank)this.setTargetBlank();this.showToolbarActions();input.value='';},bindWindowActions:function(){var timerResize,self=this;this.windowResizeHandler=function(){clearTimeout(timerResize);timerResize=setTimeout(function(){if(self.toolbar&&self.toolbar.classList.contains('medium-editor-toolbar-active'))self.setToolbarPosition();},100);};window.addEventListener('resize',this.windowResizeHandler);return this;},activate:function(){if(this.isActive)return;this.setup();},deactivate:function(){var i;if(!this.isActive)return;this.isActive=false;if(this.toolbar!==undefined){document.body.removeChild(this.anchorPreview);document.body.removeChild(this.toolbar);delete this.toolbar;delete this.anchorPreview;}document.documentElement.removeEventListener('mouseup',this.checkSelectionWrapper);window.removeEventListener('resize',this.windowResizeHandler);for(i=0;i<this.elements.length;i+=1){this.elements[i].removeEventListener('mouseover',this.editorAnchorObserverWrapper);this.elements[i].removeEventListener('keyup',this.checkSelectionWrapper);this.elements[i].removeEventListener('blur',this.checkSelectionWrapper);this.elements[i].removeEventListener('paste',this.pasteWrapper);this.elements[i].removeAttribute('contentEditable');this.elements[i].removeAttribute('data-medium-element');}},htmlEntities:function(str){return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');},bindPaste:function(){var i,self=this;this.pasteWrapper=function(e){var paragraphs,html='',p;this.classList.remove('medium-editor-placeholder');if(!self.options.forcePlainText&&!self.options.cleanPastedHTML)return this;if(e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented){e.preventDefault();if(self.options.cleanPastedHTML&&e.clipboardData.getData('text/html'))return self.cleanPaste(e.clipboardData.getData('text/html'));if(!self.options.disableReturn){paragraphs=e.clipboardData.getData('text/plain').split(/[\r\n]/g);for(p=0;p<paragraphs.length;p+=1)if(paragraphs[p]!=='')if(navigator.userAgent.match(/firefox/i)&&p===0)html+=self.htmlEntities(paragraphs[p]);else html+='<p>'+self.htmlEntities(paragraphs[p])+'</p>';document.execCommand('insertHTML',false,html);}else document.execCommand('insertHTML',false,e.clipboardData.getData('text/plain'));}};for(i=0;i<this.elements.length;i+=1)this.elements[i].addEventListener('paste',this.pasteWrapper);return this;},setPlaceholders:function(){var i,activatePlaceholder=function(el){if(el.textContent.replace(/^\s+|\s+$/g,'')==='')el.classList.add('medium-editor-placeholder');},placeholderWrapper=function(e){this.classList.remove('medium-editor-placeholder');if(e.type!=='keypress')activatePlaceholder(this);};for(i=0;i<this.elements.length;i+=1){activatePlaceholder(this.elements[i]);this.elements[i].addEventListener('blur',placeholderWrapper);this.elements[i].addEventListener('keypress',placeholderWrapper);}return this;},cleanPaste:function(text){var i,elList,workEl,el=this.getSelectionElement(),multiline=/<p|<br|<div/.test(text),replacements=[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g),' '],[new RegExp(/<br class="Apple-interchange-newline">/g),'<br>'],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),'<$1$2>'],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;|“|”)([^&]+)(&quot;|&rdquo;|&ldquo;|“|”)&gt;/gi),'<a href="$2">']];for(i=0;i<replacements.length;i+=1)text=text.replace(replacements[i][0],replacements[i][1]);if(multiline){elList=text.split('<br><br>');this.pasteHTML('<p>'+elList.join('</p><p>')+'</p>');document.execCommand('insertText',false,"\n");elList=el.querySelectorAll('p,div,br');for(i=0;i<elList.length;i+=1){workEl=elList[i];switch(workEl.tagName.toLowerCase()){case 'p':case 'div':this.filterCommonBlocks(workEl);break;case 'br':this.filterLineBreak(workEl);break;}}}else this.pasteHTML(text);},pasteHTML:function(html){var elList,workEl,i,fragmentBody,pasteBlock=document.createDocumentFragment();pasteBlock.appendChild(document.createElement('body'));fragmentBody=pasteBlock.querySelector('body');fragmentBody.innerHTML=html;this.cleanupSpans(fragmentBody);elList=fragmentBody.querySelectorAll('*');for(i=0;i<elList.length;i+=1){workEl=elList[i];workEl.removeAttribute('class');workEl.removeAttribute('style');workEl.removeAttribute('dir');if(workEl.tagName.toLowerCase()==='meta')workEl.parentNode.removeChild(workEl);}document.execCommand('insertHTML',false,fragmentBody.innerHTML.replace(/&nbsp;/g,' '));},isCommonBlock:function(el){return(el&&(el.tagName.toLowerCase()==='p'||el.tagName.toLowerCase()==='div'));},filterCommonBlocks:function(el){if(/^\s*$/.test(el.innerText))el.parentNode.removeChild(el);},filterLineBreak:function(el){if(this.isCommonBlock(el.previousElementSibling))el.parentNode.removeChild(el);else if(this.isCommonBlock(el.parentNode)&&(el.parentNode.firstChild===el||el.parentNode.lastChild===el))el.parentNode.removeChild(el);else if(el.parentNode.childElementCount===1)this.removeWithParent(el);},removeWithParent:function(el){if(el&&el.parentNode)if(el.parentNode.parentNode&&el.parentNode.childElementCount===1)el.parentNode.parentNode.removeChild(el.parentNode);else el.parentNode.removeChild(el.parentNode);},cleanupSpans:function(container_el){var i,el,new_el,spans=container_el.querySelectorAll('.replace-with');for(i=0;i<spans.length;i+=1){el=spans[i];new_el=document.createElement(el.classList.contains('bold')?'b':'i');if(el.classList.contains('bold')&&el.classList.contains('italic'))new_el.innerHTML='<i>'+el.innerHTML+'</i>';else new_el.innerHTML=el.innerHTML;el.parentNode.replaceChild(new_el,el);}spans=container_el.querySelectorAll('span');for(i=0;i<spans.length;i+=1){el=spans[i];if(/^\s*$/.test())el.parentNode.removeChild(el);else el.parentNode.replaceChild(document.createTextNode(el.innerText),el);}}};}(window,document));
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.moment=factory();}(this,function(){'use strict';var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments);}function setHookCallback(callback){hookCallback=callback;}function isArray(input){return Object.prototype.toString.call(input)==='[object Array]';}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==='[object Date]';}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res;}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}function extend(a,b){for(var i in b)if(hasOwnProp(b,i))a[i]=b[i];if(hasOwnProp(b,'toString'))a.toString=b.toString;if(hasOwnProp(b,'valueOf'))a.valueOf=b.valueOf;return a;}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}function getParsingFlags(m){if(m._pf==null)m._pf=defaultParsingFlags();return m._pf;}function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict)m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}return m._isValid;}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null)extend(getParsingFlags(m),flags);else getParsingFlags(m).userInvalidated=true;return m;}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=='undefined')to._isAMomentObject=from._isAMomentObject;if(typeof from._i!=='undefined')to._i=from._i;if(typeof from._f!=='undefined')to._f=from._f;if(typeof from._l!=='undefined')to._l=from._l;if(typeof from._strict!=='undefined')to._strict=from._strict;if(typeof from._tzm!=='undefined')to._tzm=from._tzm;if(typeof from._isUTC!=='undefined')to._isUTC=from._isUTC;if(typeof from._offset!=='undefined')to._offset=from._offset;if(typeof from._pf!=='undefined')to._pf=getParsingFlags(from);if(typeof from._locale!=='undefined')to._locale=from._locale;if(momentProperties.length>0)for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=='undefined')to[prop]=val;}return to;}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(+config._d);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false;}}function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber))if(coercedNumber>=0)value=Math.floor(coercedNumber);else value=Math.ceil(coercedNumber);return value;}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++)if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i])))diffs++;return diffs+lengthDiff;}function Locale(){}var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace('_','-'):key;}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split('-');j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split('-'):null;while(j>0){locale=loadLocale(split.slice(0,j).join('-'));if(locale)return locale;if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1)break;j--;}i++;}return null;}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=='undefined'&&module&&module.exports)try{oldLocale=globalLocale._abbr;require('./locale/'+name);locale_locales__getSetGlobalLocale(oldLocale);}catch(e){}return locales[name];}function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(typeof values==='undefined')data=locale_locales__getLocale(key);else data=defineLocale(key,values);if(data)globalLocale=data;}return globalLocale._abbr;}function defineLocale(name,values){if(values!==null){values.abbr=name;if(!locales[name])locales[name]=new Locale();locales[name].set(values);locale_locales__getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr)key=key._locale._abbr;if(!key)return globalLocale;if(!isArray(key)){locale=loadLocale(key);if(locale)return locale;key=[key];}return chooseLocale(key);}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+'s']=aliases[shorthand]=unit;}function normalizeUnits(units){return typeof units==='string'?aliases[units]||aliases[units.toLowerCase()]:undefined;}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject)if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp)normalizedInput[normalizedProp]=inputObject[prop];}return normalizedInput;}function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this;}else return get_set__get(this,unit);};}function get_set__get(mom,unit){return mom._d['get'+(mom._isUTC?'UTC':'')+unit]();}function get_set__set(mom,unit,value){return mom._d['set'+(mom._isUTC?'UTC':'')+unit](value);}function getSet(units,value){var unit;if(typeof units==='object')for(unit in units)this.set(unit,units[unit]);else{units=normalizeUnits(units);if(typeof this[units]==='function')return this[units](value);}return this;}function zeroFill(number,targetLength,forceSign){var output=''+Math.abs(number),sign=number>=0;while(output.length<targetLength)output='0'+output;return(sign?(forceSign?'+':''):'-')+output;}var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==='string')func=function(){return this[callback]();};if(token)formatTokenFunctions[token]=func;if(padded)formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};if(ordinal)formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/))return input.replace(/^\[|\]$/g,'');return input.replace(/\\/g,'');}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++)if(formatTokenFunctions[array[i]])array[i]=formatTokenFunctions[array[i]];else array[i]=removeFormattingTokens(array[i]);return function(mom){var output='';for(i=0;i<length;i++)output+=array[i] instanceof Function?array[i].call(mom,format):array[i];return output;};}function formatMoment(m,format){if(!m.isValid())return m.localeData().invalidDate();format=expandFormat(format,m.localeData());if(!formatFunctions[format])formatFunctions[format]=makeFormatFunction(format);return formatFunctions[format](m);}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}return format;}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=typeof regex==='function'?regex:function(isStrict){return(isStrict&&strictRegex)?strictRegex:regex;};}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token))return new RegExp(unescapeFormat(token));return regexes[token](config._strict,config._locale);}function unescapeFormat(s){return s.replace('\\','').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}).replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==='string')token=[token];if(typeof callback==='number')func=function(input,array){array[callback]=toInt(input);};for(i=0;i<token.length;i++)tokens[token[i]]=func;}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token))tokens[token](input,config._a,config,token);}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();}addFormatToken('M',['MM',2],'Mo',function(){return this.month()+1;});addFormatToken('MMM',0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken('MMMM',0,0,function(format){return this.localeData().months(this,format);});addUnitAlias('month','M');addRegexToken('M',match1to2);addRegexToken('MM',match1to2,match2);addRegexToken('MMM',matchWord);addRegexToken('MMMM',matchWord);addParseToken(['M','MM'],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(['MMM','MMMM'],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null)array[MONTH]=month;else getParsingFlags(config).invalidMonth=input;});var defaultLocaleMonths='January_February_March_April_May_June_July_August_September_October_November_December'.split('_');function localeMonths(m){return this._months[m.month()];}var defaultLocaleMonthsShort='Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');function localeMonthsShort(m){return this._monthsShort[m.month()];}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}for(i=0;i<12;i++){mom=create_utc__createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp('^'+this.months(mom,'').replace('.','')+'$','i');this._shortMonthsParse[i]=new RegExp('^'+this.monthsShort(mom,'').replace('.','')+'$','i');}if(!strict&&!this._monthsParse[i]){regex='^'+this.months(mom,'')+'|^'+this.monthsShort(mom,'');this._monthsParse[i]=new RegExp(regex.replace('.',''),'i');}if(strict&&format==='MMMM'&&this._longMonthsParse[i].test(monthName))return i;else if(strict&&format==='MMM'&&this._shortMonthsParse[i].test(monthName))return i;else if(!strict&&this._monthsParse[i].test(monthName))return i;}}function setMonth(mom,value){var dayOfMonth;if(typeof value==='string'){value=mom.localeData().monthsParse(value);if(typeof value!=='number')return mom;}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d['set'+(mom._isUTC?'UTC':'')+'Month'](value,dayOfMonth);return mom;}function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this;}else return get_set__get(this,'Month');}function getDaysInMonth(){return daysInMonth(this.year(),this.month());}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE))overflow=DATE;getParsingFlags(m).overflow=overflow;}return m;}function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=='undefined'&&console.warn)console.warn('Deprecation warning: '+msg);}function deprecate(msg,fn){var firstTime=true,msgWithStack=msg+'\n'+new Error().stack;return extend(function(){if(firstTime){warn(msgWithStack);firstTime=false;}return fn.apply(this,arguments);},fn);}var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true;}}utils_hooks__hooks.suppressDeprecationWarnings=false;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var isoDates=[['YYYYYY-MM-DD',/[+-]\d{6}-\d{2}-\d{2}/],['YYYY-MM-DD',/\d{4}-\d{2}-\d{2}/],['GGGG-[W]WW-E',/\d{4}-W\d{2}-\d/],['GGGG-[W]WW',/\d{4}-W\d{2}/],['YYYY-DDD',/\d{4}-\d{3}/]];var isoTimes=[['HH:mm:ss.SSSS',/(T| )\d\d:\d\d:\d\d\.\d+/],['HH:mm:ss',/(T| )\d\d:\d\d:\d\d/],['HH:mm',/(T| )\d\d:\d\d/],['HH',/(T| )\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||' ');break;}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break;}if(string.match(matchOffset))config._f+='Z';configFromStringAndFormat(config);}else config._isValid=false;}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config);}}utils_hooks__hooks.createFromInputFallback=deprecate('moment construction falls back to js Date. This is '+'discouraged and will be removed in upcoming major '+'release. Please refer to '+'https://github.com/moment/moment/issues/1407 for more info.',function(config){config._d=new Date(config._i+(config._useUTC?' UTC':''));});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970)date.setFullYear(y);return date;}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970)date.setUTCFullYear(y);return date;}addFormatToken(0,['YY',2],0,function(){return this.year()%100;});addFormatToken(0,['YYYY',4],0,'year');addFormatToken(0,['YYYYY',5],0,'year');addFormatToken(0,['YYYYYY',6,true],0,'year');addUnitAlias('year','y');addRegexToken('Y',matchSigned);addRegexToken('YY',match1to2,match2);addRegexToken('YYYY',match1to4,match4);addRegexToken('YYYYY',match1to6,match6);addRegexToken('YYYYYY',match1to6,match6);addParseToken(['YYYY','YYYYY','YYYYYY'],YEAR);addParseToken('YY',function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input);});function daysInYear(year){return isLeapYear(year)?366:365;}function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet('FullYear',false);function getIsLeapYear(){return isLeapYear(this.year());}addFormatToken('w',['ww',2],'wo','week');addFormatToken('W',['WW',2],'Wo','isoWeek');addUnitAlias('week','w');addUnitAlias('isoWeek','W');addRegexToken('w',match1to2);addRegexToken('ww',match1to2,match2);addRegexToken('W',match1to2);addRegexToken('WW',match1to2,match2);addWeekParseToken(['w','ww','W','WW'],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end)daysToDayOfWeek-=7;if(daysToDayOfWeek<end-7)daysToDayOfWeek+=7;adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,'d');return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()};}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}function localeFirstDayOfYear(){return this._week.doy;}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,'d');}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,'d');}addFormatToken('DDD',['DDDD',3],'DDDo','dayOfYear');addUnitAlias('dayOfYear','DDD');addRegexToken('DDD',match1to3);addRegexToken('DDDD',match3);addParseToken(['DDD','DDDD'],function(input,array,config){config._dayOfYear=toInt(input);});function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var d=createUTCDate(year,0,1).getUTCDay();var daysToAdd;var dayOfYear;d=d===0?7:d;weekday=weekday!=null?weekday:firstDayOfWeek;daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0);dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear};}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf('day')-this.clone().startOf('year'))/864e5)+1;return input==null?dayOfYear:this.add((input-dayOfYear),'d');}function defaults(a,b,c){if(a!=null)return a;if(b!=null)return b;return c;}function currentDateArray(config){var now=new Date();if(config._useUTC)return [now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];return [now.getFullYear(),now.getMonth(),now.getDate()];}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d)return;currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null)dayOfYearFromWeekInfo(config);if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse))getParsingFlags(config)._overflowDayOfYear=true;date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}for(i=0;i<3&&config._a[i]==null;++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null)config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);if(config._nextDay)config._a[HOUR]=24;}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow)++week;}else if(w.e!=null)weekday=w.e+dow;else weekday=dow;}temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return;}config._a=[];getParsingFlags(config).empty=true;var string=''+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0)getParsingFlags(config).unusedInput.push(skipped);string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}if(formatTokenFunctions[token]){if(parsedInput)getParsingFlags(config).empty=false;else getParsingFlags(config).unusedTokens.push(token);addTimeToArrayFromToken(token,parsedInput,config);}else if(config._strict&&!parsedInput)getParsingFlags(config).unusedTokens.push(token);}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0)getParsingFlags(config).unusedInput.push(string);if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0)getParsingFlags(config).bigHour=undefined;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null)return hour;if(locale.meridiemHour!=null)return locale.meridiemHour(hour,meridiem);else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12)hour+=12;if(!isPm&&hour===12)hour=0;return hour;}else return hour;}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null)tempConfig._useUTC=config._useUTC;tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig))continue;currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}extend(config,bestMoment||tempConfig);}function configFromObject(config){if(config._d)return;var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];configFromArray(config);}function createFromConfig(config){var input=config._i,format=config._f,res;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||(format===undefined&&input===''))return valid__createInvalid({nullInput:true});if(typeof input==='string')config._i=input=config._locale.preparse(input);if(isMoment(input))return new Moment(checkOverflow(input));else if(isArray(format))configFromStringAndArray(config);else if(format)configFromStringAndFormat(config);else if(isDate(input))config._d=input;else configFromInput(config);res=new Moment(checkOverflow(config));if(res._nextDay){res.add(1,'d');res._nextDay=undefined;}return res;}function configFromInput(config){var input=config._i;if(input===undefined)config._d=new Date();else if(isDate(input))config._d=new Date(+input);else if(typeof input==='string')configFromString(config);else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else if(typeof input==='object')configFromObject(config);else if(typeof input==='number')config._d=new Date(input);else utils_hooks__hooks.createFromInputFallback(config);}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof locale==='boolean'){strict=locale;locale=undefined;}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}var prototypeMin=deprecate('moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other;});var prototypeMax=deprecate('moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other;});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0]))moments=moments[0];if(!moments.length)return local__createLocal();res=moments[0];for(i=1;i<moments.length;++i)if(moments[i][fn](res))res=moments[i];return res;}function min(){var args=[].slice.call(arguments,0);return pickBy('isBefore',args);}function max(){var args=[].slice.call(arguments,0);return pickBy('isAfter',args);}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble();}function isDuration(obj){return obj instanceof Duration;}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign='+';if(offset<0){offset=-offset;sign='-';}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2);});}offset('Z',':');offset('ZZ','');addRegexToken('Z',matchOffset);addRegexToken('ZZ',matchOffset);addParseToken(['Z','ZZ'],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=((string||'').match(matchOffset)||[]);var chunk=matches[matches.length-1]||[];var parts=(chunk+'').match(chunkOffset)||['-',0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==='+'?minutes:-minutes;}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-(+res);res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res;}else return local__createLocal(input).local();return model._isUTC?local__createLocal(input).zone(model._offset||0):local__createLocal(input).local();}function getDateOffset(m){return -Math.round(m._d.getTimezoneOffset()/15)*15;}utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==='string')input=offsetFromString(input);if(Math.abs(input)<16)input=input*60;if(!this._isUTC&&keepLocalTime)localAdjust=getDateOffset(this);this._offset=input;this._isUTC=true;if(localAdjust!=null)this.add(localAdjust,'m');if(offset!==input)if(!keepLocalTime||this._changeInProgress)add_subtract__addSubtract(this,create__createDuration(input-offset,'m'),1,false);else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null;}return this;}else return this._isUTC?offset:getDateOffset(this);}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=='string')input=-input;this.utcOffset(input,keepLocalTime);return this;}else return -this.utcOffset();}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime)this.subtract(getDateOffset(this),'m');}return this;}function setOffsetToParsedOffset(){if(this._tzm)this.utcOffset(this._tzm);else if(typeof this._i==='string')this.utcOffset(offsetFromString(this._i));return this;}function hasAlignedHourOffset(input){if(!input)input=0;else input=local__createLocal(input).utcOffset();return(this.utcOffset()-input)%60===0;}function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}function isDaylightSavingTimeShifted(){if(this._a){var other=this._isUTC?create_utc__createUTC(this._a):local__createLocal(this._a);return this.isValid()&&compareArrays(this._a,other.toArray())>0;}return false;}function isLocal(){return !this._isUTC;}function isUtcOffset(){return this._isUTC;}function isUtc(){return this._isUTC&&this._offset===0;}var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input))duration={ms:input._milliseconds,d:input._days,M:input._months};else if(typeof input==='number'){duration={};if(key)duration[key]=input;else duration.milliseconds=input;}else if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};}else if(!!(match=create__isoRegex.exec(input))){sign=(match[1]==='-')?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)};}else if(duration==null)duration={};else if(typeof duration==='object'&&('from' in duration||'to' in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,'_locale'))ret._locale=input._locale;return ret;}create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(',','.'));return(isNaN(res)?0:res)*sign;}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,'M').isAfter(other))--res.months;res.milliseconds=+other-+(base.clone().add(res.months,'M'));return res;}function momentsDifference(base,other){var res;other=cloneWithOffset(other,base);if(base.isBefore(other))res=positiveMomentsDifference(base,other);else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}return res;}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,'moment().'+name+'(period, number) is deprecated. Please use moment().'+name+'(number, period).');tmp=val;val=period;period=tmp;}val=typeof val==='string'?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this;};}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds)mom._d.setTime(+mom._d+milliseconds*isAdding);if(days)get_set__set(mom,'Date',get_set__get(mom,'Date')+days*isAdding);if(months)setMonth(mom,get_set__get(mom,'Month')+months*isAdding);if(updateOffset)utils_hooks__hooks.updateOffset(mom,days||months);}var add_subtract__add=createAdder(1,'add');var add_subtract__subtract=createAdder(-1,'subtract');function moment_calendar__calendar(time){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf('day'),diff=this.diff(sod,'days',true),format=diff<-6?'sameElse':diff<-1?'lastWeek':diff<0?'lastDay':diff<1?'sameDay':diff<2?'nextDay':diff<7?'nextWeek':'sameElse';return this.format(this.localeData().calendar(format,this,local__createLocal(now)));}function clone(){return new Moment(this);}function isAfter(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return +this>+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return inputMs<+this.clone().startOf(units);}}function isBefore(input,units){var inputMs;units=normalizeUnits(typeof units!=='undefined'?units:'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return +this<+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return +this.clone().endOf(units)<inputMs;}}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units);}function isSame(input,units){var inputMs;units=normalizeUnits(units||'millisecond');if(units==='millisecond'){input=isMoment(input)?input:local__createLocal(input);return +this===+input;}else{inputMs=+local__createLocal(input);return +(this.clone().startOf(units))<=inputMs&&inputMs<=+(this.clone().endOf(units));}}function absFloor(number){if(number<0)return Math.ceil(number);else return Math.floor(number);}function diff(input,units,asFloat){var that=cloneWithOffset(input,this),zoneDelta=(that.utcOffset()-this.utcOffset())*6e4,delta,output;units=normalizeUnits(units);if(units==='year'||units==='month'||units==='quarter'){output=monthDiff(this,that);if(units==='quarter')output=output/3;else if(units==='year')output=output/12;}else{delta=this-that;output=units==='second'?delta/1e3:units==='minute'?delta/6e4:units==='hour'?delta/36e5:units==='day'?(delta-zoneDelta)/864e5:units==='week'?(delta-zoneDelta)/6048e5:delta;}return asFloat?output:absFloor(output);}function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,'months'),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,'months');adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,'months');adjust=(b-anchor)/(anchor2-anchor);}return -(wholeMonthDiff+adjust);}utils_hooks__hooks.defaultFormat='YYYY-MM-DDTHH:mm:ssZ';function toString(){return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');}function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999)if('function'===typeof Date.prototype.toISOString)return this.toDate().toISOString();else return formatMoment(m,'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');else return formatMoment(m,'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output);}function from(time,withoutSuffix){if(!this.isValid())return this.localeData().invalidDate();return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix);}function to(time,withoutSuffix){if(!this.isValid())return this.localeData().invalidDate();return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix);}function locale(key){var newLocaleData;if(key===undefined)return this._locale._abbr;else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null)this._locale=newLocaleData;return this;}}var lang=deprecate('moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',function(key){if(key===undefined)return this.localeData();else return this.locale(key);});function localeData(){return this._locale;}function startOf(units){units=normalizeUnits(units);switch(units){case 'year':this.month(0);case 'quarter':case 'month':this.date(1);case 'week':case 'isoWeek':case 'day':this.hours(0);case 'hour':this.minutes(0);case 'minute':this.seconds(0);case 'second':this.milliseconds(0);}if(units==='week')this.weekday(0);if(units==='isoWeek')this.isoWeekday(1);if(units==='quarter')this.month(Math.floor(this.month()/3)*3);return this;}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==='millisecond')return this;return this.startOf(units).add(1,(units==='isoWeek'?'week':units)).subtract(1,'ms');}function to_type__valueOf(){return +this._d-((this._offset||0)*60000);}function unix(){return Math.floor(+this/1000);}function toDate(){return this._offset?new Date(+this):this._d;}function toArray(){var m=this;return [m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}function moment_valid__isValid(){return valid__isValid(this);}function parsingFlags(){return extend({},getParsingFlags(this));}function invalidAt(){return getParsingFlags(this).overflow;}addFormatToken(0,['gg',2],0,function(){return this.weekYear()%100;});addFormatToken(0,['GG',2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}addWeekYearFormatToken('gggg','weekYear');addWeekYearFormatToken('ggggg','weekYear');addWeekYearFormatToken('GGGG','isoWeekYear');addWeekYearFormatToken('GGGGG','isoWeekYear');addUnitAlias('weekYear','gg');addUnitAlias('isoWeekYear','GG');addRegexToken('G',matchSigned);addRegexToken('g',matchSigned);addRegexToken('GG',match1to2,match2);addRegexToken('gg',match1to2,match2);addRegexToken('GGGG',match1to4,match4);addRegexToken('gggg',match1to4,match4);addRegexToken('GGGGG',match1to6,match6);addRegexToken('ggggg',match1to6,match6);addWeekParseToken(['gggg','ggggg','GGGG','GGGGG'],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(['gg','GG'],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input);});function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week;}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add((input-year),'y');}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add((input-year),'y');}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}addFormatToken('Q',0,0,'quarter');addUnitAlias('quarter','Q');addRegexToken('Q',match1);addParseToken('Q',function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}addFormatToken('D',['DD',2],'Do','date');addUnitAlias('date','D');addRegexToken('D',match1to2);addRegexToken('DD',match1to2,match2);addRegexToken('Do',function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient;});addParseToken(['D','DD'],DATE);addParseToken('Do',function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10);});var getSetDayOfMonth=makeGetSet('Date',true);addFormatToken('d',0,'do','day');addFormatToken('dd',0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken('ddd',0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken('dddd',0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken('e',0,0,'weekday');addFormatToken('E',0,0,'isoWeekday');addUnitAlias('day','d');addUnitAlias('weekday','e');addUnitAlias('isoWeekday','E');addRegexToken('d',match1to2);addRegexToken('e',match1to2);addRegexToken('E',match1to2);addRegexToken('dd',matchWord);addRegexToken('ddd',matchWord);addRegexToken('dddd',matchWord);addWeekParseToken(['dd','ddd','dddd'],function(input,week,config){var weekday=config._locale.weekdaysParse(input);if(weekday!=null)week.d=weekday;else getParsingFlags(config).invalidWeekday=input;});addWeekParseToken(['d','e','E'],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input==='string')if(!isNaN(input))input=parseInt(input,10);else{input=locale.weekdaysParse(input);if(typeof input!=='number')return null;}return input;}var defaultLocaleWeekdays='Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');function localeWeekdays(m){return this._weekdays[m.day()];}var defaultLocaleWeekdaysShort='Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');function localeWeekdaysShort(m){return this._weekdaysShort[m.day()];}var defaultLocaleWeekdaysMin='Su_Mo_Tu_We_Th_Fr_Sa'.split('_');function localeWeekdaysMin(m){return this._weekdaysMin[m.day()];}function localeWeekdaysParse(weekdayName){var i,mom,regex;if(!this._weekdaysParse)this._weekdaysParse=[];for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=local__createLocal([2000,1]).day(i);regex='^'+this.weekdays(mom,'')+'|^'+this.weekdaysShort(mom,'')+'|^'+this.weekdaysMin(mom,'');this._weekdaysParse[i]=new RegExp(regex.replace('.',''),'i');}if(this._weekdaysParse[i].test(weekdayName))return i;}}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,'d');}else return day;}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,'d');}function getSetISODayOfWeek(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7);}addFormatToken('H',['HH',2],0,'hour');addFormatToken('h',['hh',2],0,function(){return this.hours()%12||12;});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}meridiem('a',true);meridiem('A',false);addUnitAlias('hour','h');function matchMeridiem(isStrict,locale){return locale._meridiemParse;}addRegexToken('a',matchMeridiem);addRegexToken('A',matchMeridiem);addRegexToken('H',match1to2);addRegexToken('h',match1to2);addRegexToken('HH',match1to2,match2);addRegexToken('hh',match1to2,match2);addParseToken(['H','HH'],HOUR);addParseToken(['a','A'],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(['h','hh'],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});function localeIsPM(input){return((input+'').toLowerCase().charAt(0)==='p');}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11)return isLower?'pm':'PM';else return isLower?'am':'AM';}var getSetHour=makeGetSet('Hours',true);addFormatToken('m',['mm',2],0,'minute');addUnitAlias('minute','m');addRegexToken('m',match1to2);addRegexToken('mm',match1to2,match2);addParseToken(['m','mm'],MINUTE);var getSetMinute=makeGetSet('Minutes',false);addFormatToken('s',['ss',2],0,'second');addUnitAlias('second','s');addRegexToken('s',match1to2);addRegexToken('ss',match1to2,match2);addParseToken(['s','ss'],SECOND);var getSetSecond=makeGetSet('Seconds',false);addFormatToken('S',0,0,function(){return ~~(this.millisecond()/100);});addFormatToken(0,['SS',2],0,function(){return ~~(this.millisecond()/10);});function millisecond__milliseconds(token){addFormatToken(0,[token,3],0,'millisecond');}millisecond__milliseconds('SSS');millisecond__milliseconds('SSSS');addUnitAlias('millisecond','ms');addRegexToken('S',match1to3,match1);addRegexToken('SS',match1to3,match2);addRegexToken('SSS',match1to3,match3);addRegexToken('SSSS',matchUnsigned);addParseToken(['S','SS','SSS','SSSS'],function(input,array){array[MILLISECOND]=toInt(('0.'+input)*1000);});var getSetMillisecond=makeGetSet('Milliseconds',false);addFormatToken('z',0,0,'zoneAbbr');addFormatToken('zz',0,0,'zoneName');function getZoneAbbr(){return this._isUTC?'UTC':'';}function getZoneName(){return this._isUTC?'Coordinated Universal Time':'';}var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=moment_format__toISOString;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate('dates accessor is deprecated. Use date instead.',getSetDayOfMonth);momentPrototype__proto.months=deprecate('months accessor is deprecated. Use month instead',getSetMonth);momentPrototype__proto.years=deprecate('years accessor is deprecated. Use year instead',getSetYear);momentPrototype__proto.zone=deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779',getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1000);}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone();}var defaultCalendar={sameDay:'[Today at] LT',nextDay:'[Tomorrow at] LT',nextWeek:'dddd [at] LT',lastDay:'[Yesterday at] LT',lastWeek:'[Last] dddd [at] LT',sameElse:'L'};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return typeof output==='function'?output.call(mom,now):output;}var defaultLongDateFormat={LTS:'h:mm:ss A',LT:'h:mm A',L:'MM/DD/YYYY',LL:'MMMM D, YYYY',LLL:'MMMM D, YYYY LT',LLLL:'dddd, MMMM D, YYYY LT'};function longDateFormat(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});this._longDateFormat[key]=output;}return output;}var defaultInvalidDate='Invalid date';function invalidDate(){return this._invalidDate;}var defaultOrdinal='%d';var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace('%d',number);}function preParsePostFormat(string){return string;}var defaultRelativeTime={future:'in %s',past:'%s ago',s:'a few seconds',m:'a minute',mm:'%d minutes',h:'an hour',hh:'%d hours',d:'a day',dd:'%d days',M:'a month',MM:'%d months',y:'a year',yy:'%d years'};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(typeof output==='function')?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}function pastFuture(diff,output){var format=this._relativeTime[diff>0?'future':'past'];return typeof format==='function'?format(output):format.replace(/%s/i,output);}function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==='function')this[i]=prop;else this['_'+i]=prop;}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+'|'+(/\d{1,2}/).source);}var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format);}function list(format,index,field,count,setter){if(typeof format==='number'){index=format;format=undefined;}format=format||'';if(index!=null)return lists__get(format,index,field,setter);var i;var out=[];for(i=0;i<count;i++)out[i]=lists__get(format,i,field,setter);return out;}function lists__listMonths(format,index){return list(format,index,'months',12,'month');}function lists__listMonthsShort(format,index){return list(format,index,'monthsShort',12,'month');}function lists__listWeekdays(format,index){return list(format,index,'weekdays',7,'day');}function lists__listWeekdaysShort(format,index){return list(format,index,'weekdaysShort',7,'day');}function lists__listWeekdaysMin(format,index){return list(format,index,'weekdaysMin',7,'day');}locale_locales__getSetGlobalLocale('en',{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?'th':(b===1)?'st':(b===2)?'nd':(b===3)?'rd':'th';return number+output;}});utils_hooks__hooks.lang=deprecate('moment.lang is deprecated. Use moment.locale instead.',locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate('moment.langData is deprecated. Use moment.localeData instead.',locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1);}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1);}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years=0;data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);years=absFloor(daysToYears(days));days-=absFloor(yearsToDays(years));months+=absFloor(days/30);days%=30;years+=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}function daysToYears(days){return days*400/146097;}function yearsToDays(years){return years*146097/400;}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==='month'||units==='year'){days=this._days+milliseconds/864e5;months=this._months+daysToYears(days)*12;return units==='month'?months:months/12;}else{days=this._days+Math.round(yearsToDays(this._months/12));switch(units){case 'week':return days/7+milliseconds/6048e5;case 'day':return days+milliseconds/864e5;case 'hour':return days*24+milliseconds/36e5;case 'minute':return days*1440+milliseconds/6e4;case 'second':return days*86400+milliseconds/1000;case 'millisecond':return Math.floor(days*864e5)+milliseconds;default:throw new Error('Unknown unit '+units);}}}function duration_as__valueOf(){return(this._milliseconds+this._days*864e5+(this._months%12)*2592e6+toInt(this._months/12)*31536e6);}function makeAs(alias){return function(){return this.as(alias);};}var asMilliseconds=makeAs('ms');var asSeconds=makeAs('s');var asMinutes=makeAs('m');var asHours=makeAs('h');var asDays=makeAs('d');var asWeeks=makeAs('w');var asMonths=makeAs('M');var asYears=makeAs('y');function duration_get__get(units){units=normalizeUnits(units);return this[units+'s']();}function makeGetter(name){return function(){return this._data[name];};}var duration_get__milliseconds=makeGetter('milliseconds');var seconds=makeGetter('seconds');var minutes=makeGetter('minutes');var hours=makeGetter('hours');var days=makeGetter('days');var months=makeGetter('months');var years=makeGetter('years');function weeks(){return absFloor(this.days()/7);}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as('s'));var minutes=round(duration.as('m'));var hours=round(duration.as('h'));var days=round(duration.as('d'));var months=round(duration.as('M'));var years=round(duration.as('y'));var a=seconds<thresholds.s&&['s',seconds]||minutes===1&&['m']||minutes<thresholds.m&&['mm',minutes]||hours===1&&['h']||hours<thresholds.h&&['hh',hours]||days===1&&['d']||days<thresholds.d&&['dd',days]||months===1&&['M']||months<thresholds.M&&['MM',months]||years===1&&['y']||['yy',years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined)return false;if(limit===undefined)return thresholds[threshold];thresholds[threshold]=limit;return true;}function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix)output=locale.pastFuture(+this,output);return locale.postformat(output);}var iso_string__abs=Math.abs;function iso_string__toISOString(){var Y=iso_string__abs(this.years());var M=iso_string__abs(this.months());var D=iso_string__abs(this.days());var h=iso_string__abs(this.hours());var m=iso_string__abs(this.minutes());var s=iso_string__abs(this.seconds()+this.milliseconds()/1000);var total=this.asSeconds();if(!total)return 'P0D';return(total<0?'-':'')+'P'+(Y?Y+'Y':'')+(M?M+'M':'')+(D?D+'D':'')+((h||m||s)?'T':'')+(h?h+'H':'')+(m?m+'M':'')+(s?s+'S':'');}var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=duration_get__milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken('X',0,0,'unix');addFormatToken('x',0,0,'valueOf');addRegexToken('x',matchSigned);addRegexToken('X',matchTimestamp);addParseToken('X',function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken('x',function(input,array,config){config._d=new Date(toInt(input));});utils_hooks__hooks.version='2.10.3';setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment;}));
var $text=null;var $factList=null;var $save=null;var $poster=null;var $themeButtons=null;var $aspectRatioButtons=null;var $fontSize=null;var $timestamp=null;var $timestampToggleButtons=null;var $kicker=null;var $kickerInput=null;var $source=null;var $logoWrapper=null;var $updateTime=null;var timestampInterval=null;var onDocumentLoad=function(){$text=$('.poster blockquote p, .source');$factList=$('.poster blockquote');$save=$('#save');$poster=$('.poster');$themeButtons=$('#theme .btn');$aspectRatioButtons=$('#aspect-ratio .btn');$fontSize=$('#fontsize');$timestamp=$('.timestamp');$timestampToggleButtons=$('#timestamp-toggle .btn');$kicker=$('.kicker');$kickerInput=$('#kicker');$logoWrapper=$('.logo-wrapper');$updateTime=$('#update-time');$save.on('click',saveImage);$themeButtons.on('click',onThemeClick);$aspectRatioButtons.on('click',onAspectRatioClick);$timestampToggleButtons.on('click',onTimestampToggleClick);$fontSize.on('change',adjustFontSize);$kickerInput.on('keyup',onKickerKeyup);adjustFontSize(null,32);processText();updateTimestamp();timestampInterval=setInterval(updateTimestamp,1000);setupMediumEditor();$('[data-toggle="tooltip"]').tooltip();};var smarten=function(a){a=a.replace(/(^|[-\u2014\s(\["])'/g,"$1\u2018");a=a.replace(/'/g,"\u2019");a=a.replace(/(^|[-\u2014/\[(\u2018\s])"/g,"$1\u201c");a=a.replace(/"/g,"\u201d");a=a.replace(/--/g,"\u2014");a=a.replace(/ \u2014 /g,"\u2009\u2014\u2009");return a;};var convertToSlug=function(text){return text.toLowerCase().replace(/[^\w ]+/g,'').replace(/ +/g,'-');};var processText=function(){$text=$('.poster blockquote p, .source');$text.each(function(){var rawText=$.trim($(this).html());$(this).html(smarten(rawText)).find('br').remove();});};var updateTimestamp=function(){var latestTime=moment().format('MMMM D, YYYY h:mm A');if(latestTime!=$timestamp.text())$timestamp.text(latestTime);};var saveImage=function(){if(($factList.offset().top+$factList.height())>$logoWrapper.offset().top)var tooTallMessage="Your list is too long. Shorten the text or choose a smaller font-size.";if($kicker.width()>$poster.width())var tooWideMessage="Your headline is too wide. Shorten the headline.";if(tooTallMessage||tooWideMessage){var alertMessage;if(tooTallMessage&&tooWideMessage)alertMessage=tooTallMessage+'\n'+tooWideMessage;else alertMessage=tooTallMessage?tooTallMessage:tooWideMessage;alert(alertMessage);return;}$('canvas').remove();processText();html2canvas($poster,{letterRendering:true,onrendered:function(canvas){document.body.appendChild(canvas);window.oCanvas=document.getElementsByTagName("canvas");window.oCanvas=window.oCanvas[0];var strDataURI=window.oCanvas.toDataURL();var headline=$kicker.text().split(' ',9);var filename=convertToSlug(headline.join(' '));var a=$("<a>").attr("href",strDataURI).attr("download","factlist-"+filename+".png").appendTo("body");a[0].click();a.remove();$('#download').attr('href',strDataURI).attr('target','_blank');$('#download').trigger('click');}});};var adjustFontSize=function(e,size){var newSize=size||$(this).val();var fontSize=newSize.toString()+'px';$poster.css('font-size',fontSize);if($fontSize.val()!==newSize)$fontSize.val(newSize);;};var onThemeClick=function(e){$themeButtons.removeClass().addClass('btn btn-primary');$(this).addClass('active');$poster.removeClass('poster-theme1 poster-theme2 poster-theme3 poster-theme4').addClass('poster-'+$(this).attr('id'));};var onAspectRatioClick=function(e){$aspectRatioButtons.removeClass().addClass('btn btn-primary');$(this).addClass('active');$poster.removeClass('square sixteen-by-nine').addClass($(this).attr('id'));if($poster.hasClass('sixteen-by-nine')){$fontSize.attr('min',24);$fontSize.val(24);adjustFontSize(null,32);}else{$fontSize.attr('min',32);$fontSize.val(42);adjustFontSize(null,42);}};var onTimestampToggleClick=function(e){$timestampToggleButtons.removeClass().addClass('btn btn-primary');$(this).addClass('active');if($(this).attr('id')==='show-timestamp')$timestamp.show();else $timestamp.hide();};var onKickerKeyup=function(e){var inputText=$(this).val();$kicker.text(inputText);};var setupMediumEditor=function(){var quoteEl=document.querySelectorAll('.poster blockquote');var quoteEditor=new MediumEditor(quoteEl,{disableToolbar:true,placeholder:''});$factList.focus();};$(onDocumentLoad);